<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>操作系统杂谈 on 菘菓菌</title><link>https://songguokunsgg.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9D%82%E8%B0%88/</link><description>Recent content in 操作系统杂谈 on 菘菓菌</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 20 Feb 2025 16:15:15 +0000</lastBuildDate><atom:link href="https://songguokunsgg.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9D%82%E8%B0%88/index.xml" rel="self" type="application/rss+xml"/><item><title>Windows + OpenWRT 异地 Zerotier 组网</title><link>https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/</link><pubDate>Thu, 20 Feb 2025 16:15:15 +0000</pubDate><guid>https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/</guid><description>&lt;p>之前在 NAS 系统上一直使用 IPv6+ 端口号的形式来使用各项服务，日常使用倒是没有什么问题。但是，在需要远程维护路由器和服务器功能，外网仅 IPv6 的使用方式就存在一个大问题了——每次重启路由 wan/wan6，所有机器的 IPv6 地址都会变化，光是变化也还算好，毕竟我们还做了 ddns 服务，等十来分钟，新的 IPv6 地址就会被解析到 DNS 服务器。但是，解析之后，由于 DNS 缓存等等原因，域名仍然会存在一些问题……总之，每次重启之后，想要正常使用服务，需要等待一段较长的时间，并且由于连不上设备，只能坐在电脑前干等，挺煎熬的。所以我就想着再做一个 VPN，保留一个 IPv4 的远程访问接口。&lt;/p>
&lt;h2 id="内网穿透与异地组网">内网穿透与异地组网
&lt;/h2>&lt;p>异地组网是指将地理位置不同的网络或设备通过专用网络（如 MPLS
、VPN、SD-WAN 等）连接起来，形成一个虚拟的统一网络环境，使远程的设备和用户能够像在同一局域网内一样进行数据通信。异地组网广泛应用于企业的分支机构互联、跨地域办公等场景中。常见的异地组网方式有 ZeroTier 等。&lt;/p>
&lt;p>内网穿透（NAT Traversal）是一种通过中间服务器或代理服务器使位于不同内网环境中的设备可以直接通信的技术。其原理是将内网中的设备数据转发到公网上，允许外部设备访问内部网络资源。内网穿透通常用于远程访问内网服务（如家庭摄像头、局域网服务器）或便捷地连接内网中的特定设备。常见的内网穿透方式主要是 FRP。&lt;/p>
&lt;p>我的个人理解如下：内网穿透主要用于暴露某个端口（也就是某项服务）到公网上，具有明确的指向性。异地组网则是把各个设备通过 VPN 组成一个私有的虚拟局域网，这个局域网内的设备可以访问其它设备的所有服务，在服务方面不具有指向性，但对于连接设备具有针对性（只有虚拟局域网内的设备可以相互访问）。&lt;/p>
&lt;p>内网穿透很简单，以前也有讲过，这里就不赘述了，此文主要讲 zerotier 组网。&lt;/p>
&lt;h2 id="zerotier-配置">ZeroTier 配置
&lt;/h2>&lt;p>进入&lt;a class="link" href="https://www.zerotier.com/" target="_blank" rel="noopener"
>ZeroTier 官方网站&lt;/a>，注册一个新账户。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%B3%A8%E5%86%8C%E6%96%B0%E8%B4%A6%E6%88%B7.png"
width="1773"
height="1444"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%B3%A8%E5%86%8C%E6%96%B0%E8%B4%A6%E6%88%B7_hu_e2de84f368cb3811.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%B3%A8%E5%86%8C%E6%96%B0%E8%B4%A6%E6%88%B7_hu_400e4687024314bf.png 1024w"
loading="lazy"
alt="注册新账户"
class="gallery-image"
data-flex-grow="122"
data-flex-basis="294px"
>&lt;/p>
&lt;p>也可以使用社交帐号登录，登录之后创建一个 Network。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%88%9B%E5%BB%BAnetwork.png"
width="2008"
height="856"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%88%9B%E5%BB%BAnetwork_hu_30f027325d284ea.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%88%9B%E5%BB%BAnetwork_hu_580c90d3cd64415c.png 1024w"
loading="lazy"
alt="创建一个 Network"
class="gallery-image"
data-flex-grow="234"
data-flex-basis="562px"
>
&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%88%9B%E5%BB%BA%E5%A5%BD%E4%B8%80%E4%B8%AAnetwork.png"
width="1887"
height="765"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%88%9B%E5%BB%BA%E5%A5%BD%E4%B8%80%E4%B8%AAnetwork_hu_8bd3ed2434a92063.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%88%9B%E5%BB%BA%E5%A5%BD%E4%B8%80%E4%B8%AAnetwork_hu_e96c2ca92a46f981.png 1024w"
loading="lazy"
alt="创建完成后的界面"
class="gallery-image"
data-flex-grow="246"
data-flex-basis="592px"
>&lt;/p>
&lt;p>点击新创建的 Network，进入配置页面，基本上不用改配置，把 Network 名字改改就行，然后选择一个/24 的网段，我实测/16 的网段稳定性较差。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E4%BF%AE%E6%94%B9%E7%BD%91%E6%AE%B5%E4%B8%BA%E6%8E%A9%E7%A0%8124.png"
width="1291"
height="1384"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E4%BF%AE%E6%94%B9%E7%BD%91%E6%AE%B5%E4%B8%BA%E6%8E%A9%E7%A0%8124_hu_e839edf5701f64c7.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E4%BF%AE%E6%94%B9%E7%BD%91%E6%AE%B5%E4%B8%BA%E6%8E%A9%E7%A0%8124_hu_2bb94e552e0c9a5d.png 1024w"
loading="lazy"
alt="选择一个 /24 的网段"
class="gallery-image"
data-flex-grow="93"
data-flex-basis="223px"
>&lt;/p>
&lt;p>其它就不用动了，记下这个 Network 的 ID，后面需要用这个 ID 来加入这个局域网。&lt;/p>
&lt;h2 id="windows-安装-zerotier">Windows 安装 ZeroTier
&lt;/h2>&lt;p>进入 Download 页面，下载 Windows 版本的 ZeroTier，下载安装。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E4%B8%8B%E8%BD%BDWindows%E7%89%88%E7%9A%84Zerotier.png"
width="1498"
height="1185"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E4%B8%8B%E8%BD%BDWindows%E7%89%88%E7%9A%84Zerotier_hu_256f2edaa1509c5a.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E4%B8%8B%E8%BD%BDWindows%E7%89%88%E7%9A%84Zerotier_hu_9aee46057cbe87a1.png 1024w"
loading="lazy"
alt="下载页面"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="303px"
>
&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%AE%89%E8%A3%85%E5%A5%BD%E7%9A%84zerotier.png"
width="452"
height="194"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%AE%89%E8%A3%85%E5%A5%BD%E7%9A%84zerotier_hu_a959f065e2f979a0.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E5%AE%89%E8%A3%85%E5%A5%BD%E7%9A%84zerotier_hu_c79780130dc5e8de.png 1024w"
loading="lazy"
alt="安装完成"
class="gallery-image"
data-flex-grow="232"
data-flex-basis="559px"
>&lt;/p>
&lt;p>安装后的 ZeroTier 不会在桌面创建快捷方式，但可以在开始菜单中找到，快捷方式可以自行创建（右键 ZeroTier，选择“打开文件位置”，将快捷方式复制到桌面即可）。&lt;/p>
&lt;p>打开 ZeroTier 后，右下角可以看到它的图标，点击图标，“Join a Network”来加入一个虚拟局域网。如果这个设备很常用，那么要把“Start UI at Login”选上。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/windowszerotier%E7%95%8C%E9%9D%A2.png"
width="564"
height="283"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/windowszerotier%E7%95%8C%E9%9D%A2_hu_d9b8013661237792.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/windowszerotier%E7%95%8C%E9%9D%A2_hu_26e71d9b7e59a121.png 1024w"
loading="lazy"
alt="Windows Zerotier"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="478px"
>&lt;/p>
&lt;p>回到 zerotier 网页端，同意该设备加入。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0windows%E8%AE%BE%E5%A4%87%E8%AF%B7%E6%B1%82.png"
width="1548"
height="982"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0windows%E8%AE%BE%E5%A4%87%E8%AF%B7%E6%B1%82_hu_ce1ea78cb0c69d7e.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0windows%E8%AE%BE%E5%A4%87%E8%AF%B7%E6%B1%82_hu_34b670ca0f8da465.png 1024w"
loading="lazy"
alt="新 windows 设备请求"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>然后我们打开终端，查看 &lt;code>ipconfig&lt;/code>，可以看到类似下面的输出&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">以太网适配器 ZeroTier One [272f5********]:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 连接特定的 DNS 后缀 . . . . . . . :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 本地链接 IPv6 地址。. . . . . . . : fe80::f25d:1cdc:b591:f44c%19
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> IPv4 地址 . . . . . . . . . . . . : 10.147.19.12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 子网掩码 . . . . . . . . . . . . : 255.255.255.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 默认网关。. . . . . . . . . . . . : 25.255.255.254
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>能获取到 IPv4 地址就可以了，保险起见的话，还可以核对一下网页端的 IP 地址。&lt;/p>
&lt;h2 id="openwrt-安装-zerotier">OpenWRT 安装 ZeroTier
&lt;/h2>&lt;p>路由器异地组网可以说是整个家庭网络的核心，只要路由器不出事，其它问题都好解决，因此 OpenWRT 安装 Zerotier 我觉得很有必要，但 OpenWRT 的安装相对 Windows 要困难许多。&lt;/p>
&lt;ol>
&lt;li>编译安装&lt;/li>
&lt;/ol>
&lt;p>在源码中 &lt;code>make menuconfig&lt;/code>，luci-application 里面勾选 zerotier 即可。&lt;/p>
&lt;ol start="2">
&lt;li>包管理器安装&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">opkg update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">opkg install zerotier
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>有条件的话，我非常建议所有软件都通过编译安装，不容易出问题，不方便的话就用包管理器安装也行。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/openwrtzerotier%E7%95%8C%E9%9D%A2.png"
width="2559"
height="1396"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/openwrtzerotier%E7%95%8C%E9%9D%A2_hu_75d53baceb01058e.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/openwrtzerotier%E7%95%8C%E9%9D%A2_hu_375caf13a846e29b.png 1024w"
loading="lazy"
alt="OpenWRT 系统上的 Zerotier 界面"
class="gallery-image"
data-flex-grow="183"
data-flex-basis="439px"
>&lt;/p>
&lt;p>填入自己的网络 ID，然后启用。&lt;/p>
&lt;p>接下来，我们来配置防火墙，首先将“常规设置”里面的“转发”改为“接受”，然后新建一个防火墙区域。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E9%98%B2%E7%81%AB%E5%A2%99%E5%8C%BA%E5%9F%9F.png"
width="1084"
height="1291"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E9%98%B2%E7%81%AB%E5%A2%99%E5%8C%BA%E5%9F%9F_hu_a78e00887bfe6094.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E9%98%B2%E7%81%AB%E5%A2%99%E5%8C%BA%E5%9F%9F_hu_a453341ab270712a.png 1024w"
loading="lazy"
alt="新建 zerotier 防火墙区域"
class="gallery-image"
data-flex-grow="83"
data-flex-basis="201px"
>&lt;/p>
&lt;p>规则按图上即可，“涵盖的网络”这一项暂时选不了，因为我们还没有创建网络接口。&lt;/p>
&lt;p>然后来到“接口”，添加一个新接口，协议选择 DHCP 即可（也可以选择无协议，自行配置 IP，但一定要与管理页面上的 IP 对上，还是 DHCP 更方便）：&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E6%8E%A5%E5%8F%A31.png"
width="1108"
height="1165"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E6%8E%A5%E5%8F%A31_hu_970b6cafaeed005f.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E6%8E%A5%E5%8F%A31_hu_ab8259f2d4d0d1e3.png 1024w"
loading="lazy"
alt="zerotier 接口常规设置"
class="gallery-image"
data-flex-grow="95"
data-flex-basis="228px"
>
&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E6%8E%A5%E5%8F%A32.png"
width="1048"
height="406"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E6%8E%A5%E5%8F%A32_hu_6cbaaa3571c8dd28.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E6%96%B0%E5%BB%BAzerotier%E6%8E%A5%E5%8F%A32_hu_51fb312f6fee8de4.png 1024w"
loading="lazy"
alt="zerotier 接口防火墙区域设置"
class="gallery-image"
data-flex-grow="258"
data-flex-basis="619px"
>&lt;/p>
&lt;p>然后回到防火墙设置，将“涵盖的网络”这一项选择 ZeroTier 接口，此外，还要添加一条通信规则：&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E9%98%B2%E7%81%AB%E5%A2%99%E9%80%9A%E4%BF%A1%E8%A7%84%E5%88%99-%E5%BC%80%E6%94%BEzerotier.png"
width="1077"
height="1209"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E9%98%B2%E7%81%AB%E5%A2%99%E9%80%9A%E4%BF%A1%E8%A7%84%E5%88%99-%E5%BC%80%E6%94%BEzerotier_hu_ff63c13f5f1d4c7a.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/%E9%98%B2%E7%81%AB%E5%A2%99%E9%80%9A%E4%BF%A1%E8%A7%84%E5%88%99-%E5%BC%80%E6%94%BEzerotier_hu_e09d7893f60fcde0.png 1024w"
loading="lazy"
alt="防火墙通信规则 - 开放 9993 端口"
class="gallery-image"
data-flex-grow="89"
data-flex-basis="213px"
>&lt;/p>
&lt;p>回到 ZeroTier 界面，查看接口信息，能获取到 IPv4 地址就可以了。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/zerotier%E6%8E%A5%E5%8F%A3%E4%BF%A1%E6%81%AF.png"
width="1458"
height="955"
srcset="https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/zerotier%E6%8E%A5%E5%8F%A3%E4%BF%A1%E6%81%AF_hu_c3b7bc000281fd73.png 480w, https://songguokunsgg.github.io/p/windows--openwrt-%E5%BC%82%E5%9C%B0-zerotier-%E7%BB%84%E7%BD%91/zerotier%E6%8E%A5%E5%8F%A3%E4%BF%A1%E6%81%AF_hu_931175712031cb5e.png 1024w"
loading="lazy"
alt="zerotier 接口信息"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="366px"
>&lt;/p>
&lt;p>最后，可以做一下 ping 测试，两台设备进行相互 ping，都能 ping 通的话即 OK。&lt;/p>
&lt;h2 id="zerotier-原理">Zerotier 原理
&lt;/h2>&lt;p>下面简单讲解一下 Zerotier 的原理。&lt;/p>
&lt;p>ZeroTier 使用一个中央服务器来管理网络成员的身份验证和授权。每个加入网络的设备都需要一个 ZeroTier 身份（ZTID），这是一个类似于公钥的标识符。用户在 ZeroTier 中心服务器上注册，获取一个身份，并为设备分配 ZTID。每个设备在加入网络时，都会通过中心服务器来发现网络中的其他成员。中心服务器维护一个成员列表，包括每个设备的 ZTID 和网络地址。&lt;/p>
&lt;p>ZeroTier 通过路径选择算法来确定数据在网络中的最佳传输路径。如果两个设备之间没有直接的网络连接，ZeroTier 会通过中继节点来转发数据。中继节点是网络中的一些设备，它们允许其他设备通过它们来转发数据。&lt;/p>
&lt;p>在设备中，ZeroTier 会创建一个&lt;strong>虚拟网卡&lt;/strong>。在 Windows 中，这个网卡是自动创建的，在 OpenWRT 则需要我们手动配置，这个网卡的上游就是 ZeroTier 的某个服务器，该服务器具有 DHCP 功能，可以自动为接入局域网的设备分发 IP 地址。通过这个上游服务器，所有接入的设备形成了一个虚拟局域网，从而实现相互访问。&lt;/p>
&lt;p>如果你退出 ZeroTier 软件，这个虚拟网卡也就失效了，那么你就无法再访问其它设备。&lt;/p>
&lt;p>我们不需要关注 ZeroTier 的具体实现原理，只要了解一下数据的流向就行了。&lt;/p></description></item><item><title>自行编译定制 immortalWRT</title><link>https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/</link><pubDate>Sun, 26 Jan 2025 18:02:33 +0000</pubDate><guid>https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/</guid><description>&lt;h2 id="使用-podman-搭建-immortalwrt-编译环境">使用 podman 搭建 immortalWRT 编译环境
&lt;/h2>&lt;p>使用 dockerfile 构建镜像&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># podman build -t openwrt: latest -f Containerfile&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> ubuntu: 22.04&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">LABEL&lt;/span> &lt;span class="nv">maintainer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;songguokunsgg&amp;lt;fansong_yan@icloud.com&amp;gt;&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">ARG&lt;/span> &lt;span class="nv">DEBIAN_FRONTEND&lt;/span> &lt;span class="o">=&lt;/span> noninteractive&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">ENV&lt;/span> &lt;span class="nv">TZ&lt;/span> &lt;span class="o">=&lt;/span> Asia/Shanghai&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> sed -i &lt;span class="s1">&amp;#39;s@archive.ubuntu.com@mirrors.tuna.tsinghua.edu.cn@g&amp;#39;&lt;/span> /etc/apt/sources.list &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> apt upgrade -y &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="c1"># 部分软件包是编译 immortalwrt 所需的&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> bzip2 ccache clang cmake cpio curl device-tree-compiler ecj fastjar flex gawk gettext gcc-multilib &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> g++-multilib git gnutls-dev gperf haveged help2man intltool lib32gcc-s1 libc6-dev-i386 libelf-dev &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> libglib2.0-dev libgmp3-dev libltdl-dev libmpc-dev libmpfr-dev libncurses-dev libpython3-dev &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> libreadline-dev libssl-dev libtool libyaml-dev libz-dev lld llvm lrzsz mkisofs msmtp nano &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> ninja-build p7zip p7zip-full patch pkgconf python3 python3-pip python3-ply python3-docutils &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> python3-pyelftools python3-setuptools qemu-utils re2c rsync scons squashfs-tools subversion swig texinfo uglifyjs &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> upx-ucl unzip vim wget xmlto xxd zlib1g-dev zstd file &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="c1"># 新建一个普通用户，openwrt 不能用 root 用户编译&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> useradd -m user -s /bin/bash&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="s"> user&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> git config --global user.name &lt;span class="s2">&amp;#34;songguokunsgg&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> git config --global user.email &lt;span class="s2">&amp;#34;fansong_yan@icloud.com&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;==========&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;podman-compose up -d&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;To enter the container:&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;podman exec -it OpenWRT bash&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;请使用普通用户 user 进行编译&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-----end----&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 podman-compose 构建容器&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.8&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">RK3568&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openwrt&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">OpenWRT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># volumes:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;/user/openwrt:/home/openwrt/openwrt&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">network&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bridge&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bash&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tty&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stdin_open&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入容器，默认使用普通用户 &lt;code>user&lt;/code>&lt;/p>
&lt;h2 id="clone-immortalwrt-仓库">clone immortalWRT 仓库
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git clone -b openwrt-24.10 --single-branch --filter&lt;span class="o">=&lt;/span>blob:none https://github.com/immortalwrt/immortalwrt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">Cloning into &amp;#39;immortalwrt&amp;#39;...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fatal: unable to access &amp;#39;https://github.com/immortalwrt/immortalwrt/&amp;#39;: GnuTLS recv error (-110): The TLS connection was non-properly terminated.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openwrt@fcfcdf766fb1:/home/openwrt$ git clone -b openwrt-24.10 --single-branch --filter=blob:none https://github.com/immortalwrt/immortalwrt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cloning into &amp;#39;immortalwrt&amp;#39;...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...............
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Compressing objects: 100% (4299/4299), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Total 9496 (delta 1565), reused 1071 (delta 1071), pack-reused 4126 (from 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Receiving objects: 100% (9496/9496), 12.91 MiB | 4.40 MiB/s, done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resolving deltas: 100% (2055/2055), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">warning: unable to access &amp;#39;/root/.config/git/attributes&amp;#39;: Permission denied
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating files: 100% (9699/9699), done.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>成功 clone，如果出现网络错误请自行解决。&lt;/p>
&lt;p>进入仓库 &lt;code>cd immortalwrt&lt;/code>，相比 openwrt，immortalwrt 已经内置了大量软件包，因此不需要添加三方软件源。&lt;/p>
&lt;p>保证网络通常，获取软件包列表&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">./scripts/feeds update -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./scripts/feeds install -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="修改默认网络配置可选">修改默认网络配置（可选）
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">vim package/base-files/files/bin/config_generate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>搜索 192.168，可以定位到 IP 地址所在的位置，修改为 10.0.0.1 和 10.0.$((addr_offset++)).1，我习惯使用 10.0.0.1/24 网段&lt;/p>
&lt;h2 id="配置-immortalwrt">配置 immortalwrt
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">make menuconfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我的配置：&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/%E9%85%8D%E7%BD%AE%E4%B8%BB%E8%A6%81%E9%A1%B9%E7%9B%AE.png"
width="2975"
height="1946"
srcset="https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/%E9%85%8D%E7%BD%AE%E4%B8%BB%E8%A6%81%E9%A1%B9%E7%9B%AE_hu_3b121f9d6701b1e6.png 480w, https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/%E9%85%8D%E7%BD%AE%E4%B8%BB%E8%A6%81%E9%A1%B9%E7%9B%AE_hu_59dd303298a3053c.png 1024w"
loading="lazy"
alt="(20250126) 自行编译定制 immortalWRT"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="366px"
>&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/targetimages.png"
width="2984"
height="1947"
srcset="https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/targetimages_hu_7444429bd4dc1d7e.png 480w, https://songguokunsgg.github.io/p/%E8%87%AA%E8%A1%8C%E7%BC%96%E8%AF%91%E5%AE%9A%E5%88%B6-immortalwrt/targetimages_hu_80c5856d943b13e4.png 1024w"
loading="lazy"
alt="alt text"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="367px"
>&lt;/p>
&lt;p>Luci -&amp;gt; Thems 和 Apps 根据需求定制即可。&lt;/p>
&lt;h2 id="下载与编译">下载与编译
&lt;/h2>&lt;p>建议先下载再编译，避免因为网络问题而编译卡住。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">make download &lt;span class="nv">V&lt;/span>&lt;span class="o">=&lt;/span>s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make -j&lt;span class="k">$(&lt;/span>nproc&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下载使用单线程，因为国内的网络环境很有可能需要随时调试。编译可以使用多线程，如果遇到报错的话使用单线程编译 &lt;code>make -j1 V=s&lt;/code> 排错。&lt;/p>
&lt;p>推荐第一次编译使用单线程，确保可以编译成功后，再使用多线程编译。已经编译过的代码不会重复编译，因此第一次编译会比较慢，后面就会快很多。&lt;/p>
&lt;p>编译结果保存在 &lt;code>bin/targets/x86/64/&lt;/code> 目录下。&lt;/p></description></item><item><title>常用的 Windows 配置脚本</title><link>https://songguokunsgg.github.io/p/%E5%B8%B8%E7%94%A8%E7%9A%84-windows-%E9%85%8D%E7%BD%AE%E8%84%9A%E6%9C%AC/</link><pubDate>Fri, 10 Jan 2025 14:02:33 +0000</pubDate><guid>https://songguokunsgg.github.io/p/%E5%B8%B8%E7%94%A8%E7%9A%84-windows-%E9%85%8D%E7%BD%AE%E8%84%9A%E6%9C%AC/</guid><description>&lt;ol>
&lt;li>输入法添加小鹤双拼&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">reg&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">HKCU&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">Software&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">Microsoft&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">InputMethod&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">Settings&lt;/span>&lt;span class="p">\&lt;/span>&lt;span class="n">CHS&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="n">UserDefinedDoublePinyinScheme0&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="n">REG_SZ&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="s2">&amp;#34;小鹤双拼*2*^*iuvdjhcwfg^xmlnpbksqszxkrltvyovt&amp;#34;&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">f&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>右键菜单改为 win10 样式&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">reg&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="s2">&amp;#34;HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32&amp;#34;&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">taskkill&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">F&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">IM&lt;/span> &lt;span class="n">explorer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">explorer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>未完待续……&lt;/p></description></item><item><title>PVE 内网穿透</title><link>https://songguokunsgg.github.io/p/pve-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</link><pubDate>Mon, 13 May 2024 13:32:48 +0000</pubDate><guid>https://songguokunsgg.github.io/p/pve-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</guid><description>&lt;h2 id="安装过程">安装过程
&lt;/h2>&lt;p>DNS: 223.5.5.5，需要联网&lt;/p>
&lt;h2 id="换源转载自-tismagicpve81-下软件源更新与其它配置">换源（转载自 Tismagic：PVE8.1 下软件源更新与其它配置）
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. 更新debian 软件源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#(任选一个源)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.1 清华源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 参考: https://mirrors.tuna.tsinghua.edu.cn/help/debian/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#ftp.debian.org/debian#mirrors.tuna.tsinghua.edu.cn/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#security.debian.org#mirrors.tuna.tsinghua.edu.cn/debian-security#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.2 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 参考: https://mirrors.ustc.edu.cn/help/proxmox.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s1">&amp;#39;s|^deb http://ftp.debian.org|deb https://mirrors.ustc.edu.cn|g&amp;#39;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s1">&amp;#39;s|^deb http://security.debian.org|deb https://mirrors.ustc.edu.cn/debian-security|g&amp;#39;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.3 aliyun源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#ftp.debian.org/debian#mirrors.aliyun.com/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#修改文件的同时, 会创建一个.bak后缀的备份文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#security.debian.org#mirrors.aliyun.com/debian-security#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#阿里Debian源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.4 163源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#ftp.debian.org/debian#mirrors.163.com/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#163Debian源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#security.debian.org#mirrors.163.com/debian-security#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#163Debian源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. PVE 软件源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除默认企业源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pve&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">enterprise&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#(任选一个源)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.1.1 清华源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian bookworm pve-no-subscription&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pve&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">subscription&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.1.2 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.ustc.edu.cn/proxmox/debian/pve bookworm pve-no-subscription&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pve&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">subscription&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#3 CEPH分布式源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#3.1.1 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-quincy bookworm no-subscription&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#http://download.proxmox.com/debian#https://mirrors.ustc.edu.cn/proxmox/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">perl5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PVE&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pveceph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pm&lt;/span> &lt;span class="c1">#中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更新索引, 升级安装软件包, 重启系统&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如果无法拉取https软件源时安装&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apt&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">apt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">get&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="n">apt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">transport&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">https&lt;/span> &lt;span class="n">ca&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certificates&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">fix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apt&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">apt&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">upgrade&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#4.LXC容器仓库源(CT)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4.1.1 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#http://download.proxmox.com/images#https://mirrors.ustc.edu.cn/proxmox/images#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">perl5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PVE&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">APLInfo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">systemctl&lt;/span> &lt;span class="n">restart&lt;/span> &lt;span class="n">pvedaemon&lt;/span> &lt;span class="c1"># 稍等下手动刷新webui 页面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除订阅弹窗&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Ezi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s/(Ext.Msg.show\(\{\s+title: gettext\(&amp;#39;No valid sub)/void\(\{ \/\/&lt;/span>&lt;span class="se">\1&lt;/span>&lt;span class="s2">/g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">javascript&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxmox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">widget&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">toolkit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxmoxlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">js&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">restart&lt;/span> &lt;span class="n">pveproxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 执行完成后，需注销PVE登录后, 重新启动浏览器&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="启用内网穿透">启用内网穿透
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.natfrp.com/tunnel/" target="_blank" rel="noopener"
>https://www.natfrp.com/tunnel/&lt;/a> 申请一个免费节点（本地端口为 8006）&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/pve-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/v2-c76d91e2501b825cda133f7685a647bc_b.jpg"
width="600"
height="154"
srcset="https://songguokunsgg.github.io/p/pve-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/v2-c76d91e2501b825cda133f7685a647bc_b_hu_654dc8a47add2236.jpg 480w, https://songguokunsgg.github.io/p/pve-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/v2-c76d91e2501b825cda133f7685a647bc_b_hu_cb9dea1f81a1f77c.jpg 1024w"
loading="lazy"
alt="下载 sakura 的 Frpc 文件"
class="gallery-image"
data-flex-grow="389"
data-flex-basis="935px"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://nya.globalslb.net/natfrp/client/launcher-unix/3.1.0/natfrp-service_linux_amd64.tar.zst
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>假设保存在 /root/Documents/ 下面，cd 到该目录，解压缩，给权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/sakurafrp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar -I zstd xvf natfrp-service_linux_amd64.tar.zst
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x ./*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>先运行一次 ./frpc 生成配置文件，配件文件保存在 ./frpc.ini 中&lt;/p>
&lt;h3 id="pve-系统添加-frpc-自启动">PVE 系统添加 frpc 自启动
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">vim /etc/systemd/system/sakurafrp.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后编写一个启动脚本，如果你的文件目录跟我放的一样，可以复制粘贴&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Unit]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description=sakuraFrp for systemd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">After=network.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Service]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ExecStart=/opt/sakurafrp/frpc -c /opt/sakurafrp/frpc.ini
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type=simple
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Install]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WantedBy=default.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启，登陆 root, 查看进程状态是否正常&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">systemctl status sakurafrp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果一切正常，直接通过 sakura 的 [IP]:[Port] 访问即可。&lt;/p></description></item><item><title>机械君迷你主机使用指南 (刚买的一定要来看看)</title><link>https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/</link><pubDate>Sun, 07 Apr 2024 12:36:07 +0000</pubDate><guid>https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/</guid><description>&lt;h2 id="为什么市面上会出现迷你主机">为什么市面上会出现迷你主机
&lt;/h2>&lt;p>我已经忘记了迷你主机是什么时候开始在市场上占有一席之地的，隐约记得是 NUC 带动的。我记得有一款 intel i5-8259U 的 NUC，在黑苹果市场特别火，在更换免驱网卡之后几乎可以完美黑苹果。在接下来的几年中，也不断有新款的迷你主机问世，但是并没有引起广泛关注。2022 年到 2023 年之间，多出了很多厂商做这款业务，这款产品才逐渐进入大众视野。&lt;/p>
&lt;p>我在去年（2023）入手了一台机械君的 R9-5900HX ES 版的准系统主机，1299 元。这也是目前我入手过的唯一一台，说实在的，我最开始并没有指望这款机器有多耐用，抑或是有多么强的性能，我只是单纯的好奇这样的产品。顺带一提，我一直是 macos 党，手里的笔记本是 macbook pro，入手这样一款小主机也能够弥补我没有 windows 的问题，这也是我选择 ES 版的原因，比较便宜，能够用上我闲置的笔记本 DDR4 内存。&lt;/p>
&lt;p>下面，我将从我自身使用的角度，以及一些预想的场景，来写一写，迷你主机究竟适合那些用户，以及笔记本电脑的痛点是什么。&lt;/p>
&lt;h3 id="场景一大学生上课">场景一：大学生上课
&lt;/h3>&lt;p>这个场景是我虚构的场景，但我好歹也曾经上过课，因此可以大胆的假设一下。&lt;/p>
&lt;p>在七点的早晨，要赶早八的你将桌面上的迷你主机装进背包，将电源线和键盘鼠标装进背包的第二格，腋下夹着一块便携屏，嘴里含着一块面包。你急匆匆的走到教室，那个你往常都在的座位，但很不幸，不知道是谁已经坐在了那里。你心想完蛋了，整个教室就那一个座位有插头。幸运的是，你带了排插，当你拿出所有的设备，却发现 HDMI 线没带。（&lt;strong>设备太杂乱容易忘带某件物品&lt;/strong>）。你看着身边带着笔记本电脑的同学，觉得自己也应该，买一台。&lt;/p>
&lt;h3 id="场景二移动办公">场景二：移动办公
&lt;/h3>&lt;p>你在办公室放了一台迷你主机，下班后，你将他带回家，接上 oculink 拓展坞，爽玩游戏。反正办公室和家里都有显示器和键鼠，一台轻巧的小主机能够满足你所有的需求，还不用把数据倒来倒去，岂不美哉？&lt;/p>
&lt;p>该场景同样适用于&lt;strong>大学生放假回家&lt;/strong>等情况。&lt;/p>
&lt;h3 id="场景三小型服务器">场景三：小型服务器
&lt;/h3>&lt;p>你已经有了一台其他的设备，但你需要一台 24 小时不间断工作的设备，以完成一些自动化工作。你将迷你主机配置好之后，直接 ssh 进去，将自动化工作挂在后台。此后的一个月，你都没有去碰它，但它却默默地为你付出着。（前提是机器质量要好，别跑几天就熄火了）。&lt;/p>
&lt;p>在背后付出的他，不需要键盘鼠标，不需要显示器，放在一个角落，插着电即可。&lt;/p>
&lt;h3 id="场景四多平台">场景四：多平台
&lt;/h3>&lt;p>你有一台 macbook，但是出于某些原因，你需要一台 windows 电脑和一台 linux 电脑。他们不常用，但不能没有。你选择了一台迷你主机，装好 windows，再用虚拟机装一个 linux，在你有需要的时候，他就会派上用场。而这只需要 1000 出头的价格。你心想，如果买笔记本或者配一台相同性能的台式机，怎么也得几千块吧，还占地方。&lt;/p>
&lt;h3 id="场景五跑路">场景五：跑路
&lt;/h3>&lt;p>你不想干了，看着桌子下面几十斤重的 4090 主机，你想让老板来帮你抬一抬，但这是不可能的。要是把 4090 放家里，公司留一台迷你主机多好，你跑路都没人追得上你。&lt;/p>
&lt;h3 id="总结">总结
&lt;/h3>&lt;p>虚构了五个场景，有些情况有些极端。但我相信，你看完之后一定能够有所思考。需要明白的是，迷你主机，始终是主机，他对标的应该是台式机而不是笔记本（迷你笔记本对标笔记本）。迷你主机相比主机而言，便宜、便携性强，但是、性能差、散热差，这是他们差异化的表现。我总结了以下几点容易陷入的误区。&lt;/p>
&lt;ol>
&lt;li>迷你主机不适合随叫随到型移动办公：要想使用迷你主机，你需要带齐一整套外设。经常移动的话，反而是一种负担，这种情况应该购买笔记本。&lt;/li>
&lt;li>迷你主机不适合高性能追求者：迷你主机用的 cpu 和显卡都是移动端的，散热也比主机更差，因此性能比不过是可以理解的。现在可以通过外接显卡的方式实现高性能，但这着实是麻烦了一点。如果你的使用场景契合场景二，可以考虑购入。&lt;/li>
&lt;li>迷你主机不适合小白：对电脑的了解程度直接决定你是否应该买迷你主机。目前迷你主机的水很深，有可能会买到不心仪的产品。比如说，机械君的这台迷你主机，客服说 HDMI 接口是 2.0，但其实是虚假宣传，4k 根本跑不到 60 帧，如果你不懂电脑，可能注意不到这些偷工减料的地方。提供几个参考名词：Ryzen、IPC、NVME、DP、RGB、内存、硬盘。如果你不知道这些名词的意思，建议不买（有懂哥帮忙除外）。&lt;/li>
&lt;li>迷你主机适合已经有一台笔记本的人：由于笔记本已经能够满足移动办公需求，迷你主机刚好可以跟笔记本互补。如果你不喜欢主机的傻大黑粗，那就更适合了。&lt;/li>
&lt;/ol>
&lt;h2 id="机械君迷你主机使用指南-刚买的一定要来看看">机械君迷你主机使用指南 (刚买的一定要来看看)
&lt;/h2>&lt;p>之前我有写过一篇关于迷你主机的杂谈，但是没有什么有深度的内容。今天这篇文章将会详细描述我使用机械君以来的真实感受，并附上真实的折腾过程。&lt;/p>
&lt;h3 id="我应不应该购买机械君">我应不应该购买机械君？
&lt;/h3>&lt;p>&lt;img src="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-a63698da119c5c8b8b71aaf0328b11a0_b.jpg"
width="600"
height="289"
srcset="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-a63698da119c5c8b8b71aaf0328b11a0_b_hu_171b0a47e90a49ec.jpg 480w, https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-a63698da119c5c8b8b71aaf0328b11a0_b_hu_1c12795f9fb02a04.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="207"
data-flex-basis="498px"
>&lt;br>
以上是我购买的迷你主机，可以看到价格确实很香，但是价格香代表问题多，后面我会详细描述。先说结论，针对地球上的所有人，我都不建议你购买这一款迷你主机，哪怕他价格很香，哪怕他性能很强，但是带来的糟心体验是真的很难受。&lt;/p>
&lt;p>我购买的原因是，手里有一块闲置的 2T 固态和一根 8g 内存条，想着利用起来，就买了这台主机，还另外买了一根 32g 内存，凑成了 40g。&lt;/p>
&lt;p>第一次发的货风扇不转，就换货了，所以图上能看到有一个售后详情。换的货二手痕迹非常严重，但是使用正常，我也不想再折腾了，就拿下了，然而麻烦才刚刚开始。&lt;/p>
&lt;h3 id="遇到的问题及解决方案">遇到的问题及解决方案
&lt;/h3>&lt;h4 id="hdmi-接口问题">HDMI 接口问题
&lt;/h4>&lt;p>&lt;img src="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-afea268e2447211922173fbb083a5c9a_b.jpg"
width="600"
height="944"
srcset="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-afea268e2447211922173fbb083a5c9a_b_hu_3482c4c174c5941a.jpg 480w, https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-afea268e2447211922173fbb083a5c9a_b_hu_6477401d89789ba5.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="63"
data-flex-basis="152px"
>&lt;br>
拿到手装上了驱动，用 HDMI 线接上了我的 4k 显示器，然后……&lt;/p>
&lt;p>&lt;strong>怎么只能使用 4k 30HZ？&lt;/strong>&lt;/p>
&lt;p>立马找到客服确认，客服说是 HDMI2.0，说我驱动有问题，还找了个人工装模作样的帮我解决了一下问题（但最后并没有解决）。&lt;/p>
&lt;p>但是我发现&lt;strong>typec 接口可以实现 4k 60&lt;/strong>，就不想跟他争辩了。&lt;/p>
&lt;p>网上也有人有这种情况（查资料的时候刷到过好几次，写文章的时候反而找不到了），我可以打包票，这两个 HDMI 接口一定是 1.4，绝非 2.0，如果你有接 4k 的需求，直接走人吧。&lt;/p>
&lt;h4 id="35mm-怎么没声音">3.5mm 怎么没声音
&lt;/h4>&lt;p>该问题无解，很多人也有这个情况，可以看这篇帖子&lt;a class="link" href="https://post.smzdm.com/p/a8xgz856/" target="_blank" rel="noopener"
>https://post.smzdm.com/p/a8xgz856/&lt;/a>。&lt;/p>
&lt;h4 id="蓝牙怎么搜不到其他设备">蓝牙怎么搜不到其他设备？
&lt;/h4>&lt;p>该主机用的原装网卡是，8852BE，有多垃圾我就不想描述了。但是，光换网卡是不够的，因为天线也有问题。所以你还需要一个&lt;/p>
&lt;p>![]((20240407) 机械君迷你主机使用指南刚买的一定要来看看_EberyThingSay/v2-1eb58a10ccadb2ed3abc553d6c2bc6ba_b.jpg)&lt;br>
把内置的天线干掉，你会发现，信号怎么这么好，网速怎么这么快，蓝牙怎么一点问题都没了。&lt;/p>
&lt;p>问题好解决，但是排查起来相当痛苦。&lt;/p>
&lt;h3 id="温度怎么这么高">温度怎么这么高？
&lt;/h3>&lt;p>迷你主机体积小是一个很大的优点，但是带来的散热问题也是无法忽略的。&lt;/p>
&lt;p>&lt;a class="link" href="https://tieba.baidu.com/p/8873148967" target="_blank" rel="noopener"
>https://tieba.baidu.com/p/8873148967&lt;/a>&lt;/p>
&lt;p>我买的咸鱼一个做 3D 打印的后盖，就不给链接了。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-42da2b0c347e4870c49992866e05e2d7_b.jpg"
width="600"
height="800"
srcset="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-42da2b0c347e4870c49992866e05e2d7_b_hu_40a34980324262a4.jpg 480w, https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-42da2b0c347e4870c49992866e05e2d7_b_hu_4249f28250e11675.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;br>
卖家预留了 8010 风扇接口，但我感觉没必要，下面开了口之后散热已经好很多了，再加上风扇只能用 usb 的，会占用一个接口，我个人感觉得不偿失。&lt;/p>
&lt;h4 id="接口太少">接口太少
&lt;/h4>&lt;p>还好有一个 typec 接口，多接一个扩展坞吧。&lt;/p>
&lt;h4 id="总结-1">总结
&lt;/h4>&lt;p>把以上步骤做完，其实也要花一两百块钱了，为什么不一步到位买个大牌的，而是买这么个玩意折腾自己。&lt;/p>
&lt;h3 id="软件方面的折腾">软件方面的折腾
&lt;/h3>&lt;h4 id="bios-更改显存">BIOS 更改显存
&lt;/h4>&lt;p>这个倒不是机械君的问题，因为很多锐龙的 U 都把显存默认限制在 512M，但还好，留了修改的接口。&lt;/p>
&lt;p>&lt;a class="link" href="https://www.bilibili.com/video/BV1w84y167ep/" target="_blank" rel="noopener"
>https://www.bilibili.com/video/BV1w84y167ep/&lt;/a>&lt;/p>
&lt;p>16g 内存设 2-4g，32g 内存就可以直接设 8g，16g 显存的话……应该没必要吧。&lt;/p>
&lt;p>如果是黑苹果的话，建议改到 4g 以上，可以有效减少花屏概率。&lt;/p>
&lt;p>&lt;strong>你刚刚说了啥？黑苹果？？？？&lt;/strong>&lt;/p>
&lt;h4 id="显卡驱动">显卡驱动
&lt;/h4>&lt;p>虽然客服让你安装 5900HX 的驱动，但这个主机的显卡驱动是不能装 5900HX 的，而是要装 5800H 的……&lt;/p>
&lt;p>至于为什么，我不好评判……&lt;/p>
&lt;p>&lt;a class="link" href="https://www.amd.com/zh-hans/support/apu/amd-ryzen-processors/amd-ryzen-7-mobile-processors-radeon-graphics/amd-ryzen-7-5800h" target="_blank" rel="noopener"
>https://www.amd.com/zh-hans/support/apu/amd-ryzen-processors/amd-ryzen-7-mobile-processors-radeon-graphics/amd-ryzen-7-5800h&lt;/a>&lt;/p>
&lt;h4 id="黑苹果">黑苹果
&lt;/h4>&lt;p>这台机器可以直接使用 零氪 5800H 迷你主机的 EFI，功能基本正常，网卡需要更换为 AX210。我提供一个 EFI：&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/songguokunsgg/jixiejun-5900hx-es-hackintosh-efi" target="_blank" rel="noopener"
>https://github.com/songguokunsgg/jixiejun-5900hx-es-hackintosh-efi&lt;/a>&lt;/p>
&lt;p>5800H/5900HX 的迷你主机可用&lt;/p>
&lt;p>但是使用过程中，可能会不定期自动重启（从早一直用到晚可能会触发，频次低），这个问题我没有排查出来，可能跟硬盘有关。&lt;/p>
&lt;p>不过每次几秒钟就会重新启动，窗口数据也都还在，倒也不是很影响使用。&lt;/p>
&lt;p>注意，安装过程中需要禁用 nootedred，安装完成，进入系统后再启用 nootedred，详细操作就不描述了，使用 OCAT 就可以搞定。&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-e9448980daac76a61131736fff2d555b_b.jpg"
width="600"
height="981"
srcset="https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-e9448980daac76a61131736fff2d555b_b_hu_5a45955dd2093dd.jpg 480w, https://songguokunsgg.github.io/p/%E6%9C%BA%E6%A2%B0%E5%90%9B%E8%BF%B7%E4%BD%A0%E4%B8%BB%E6%9C%BA%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%88%9A%E4%B9%B0%E7%9A%84%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9D%A5%E7%9C%8B%E7%9C%8B/v2-e9448980daac76a61131736fff2d555b_b_hu_d385ea00ff5717b7.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="61"
data-flex-basis="146px"
>
推荐使用 13.6.6 系统，屏蔽 macOS 14 的更新，实测很稳定。&lt;/p>
&lt;h2 id="总结-2">总结
&lt;/h2>&lt;p>时间有限，先写这么多吧，如果后面有什么好玩的，我会再分享出来。&lt;/p>
&lt;p>如果你还没有购买机械君，建议换别的品牌，如果你已经买了，相信这篇文章会为你提供一些帮助。&lt;/p>
&lt;p>文中出现的问题仅限于我这台机器，如果你的机器没有，请不要喷我，我都是实话实说。&lt;/p></description></item><item><title>2022 年，用 Wayland 开启 linux</title><link>https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/</link><pubDate>Tue, 25 Oct 2022 16:32:54 +0000</pubDate><guid>https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/</guid><description>&lt;p>虽然标题被我改成这样，但我仍然不建议主力机使用 linux, 除非你一定不会使用以下功能之一：&lt;/p>
&lt;ul>
&lt;li>MSOffice&lt;/li>
&lt;li>onedrive&lt;/li>
&lt;li>重度依赖 QQ 和微信&lt;/li>
&lt;li>一些专用工业软件&lt;/li>
&lt;li>公司独有软件&lt;/li>
&lt;li>iTunes&lt;/li>
&lt;li>visual studio 等&lt;/li>
&lt;li>钉钉（视频分享模糊，其他功能正常）&lt;/li>
&lt;/ul>
&lt;p>以下用户请慎重使用 wayland，说不定会让你直接放弃 linux&lt;/p>
&lt;ul>
&lt;li>使用 nvidia 单显卡&lt;/li>
&lt;/ul>
&lt;p>我的主力机体验了一下就回 win11 了，现在配的垃圾台式（e3 1230 + rx580）还坚持着 arch，用着还挺爽。&lt;/p>
&lt;hr>
&lt;p>&lt;strong>2022 年 10 月 23 日更新一波&lt;/strong>，之前因为一些软件用不了，我又回到了 win11，还小小的升级了一波配置（从 i7+3050 成为了 i7 加 3060）但是有些操作在 win 下面还是不太方便，于是我又把 linux 装上了，这次为了省事装的 manjaro，然后把源换成了 arch 的，但是，问题太多（我太天真了），最后还是换回了 arch&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-fc265bbfea913a5ef41f421b1b9a6af6_b.jpg"
width="720"
height="573"
srcset="https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-fc265bbfea913a5ef41f421b1b9a6af6_b_hu_96dd0d3a145525a2.jpg 480w, https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-fc265bbfea913a5ef41f421b1b9a6af6_b_hu_381fde6ab45c265d.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="125"
data-flex-basis="301px"
>&lt;/p>
&lt;p>我的配置（开了独显直连）&lt;/p>
&lt;p>经过几个月的发展，wayland 又取得了一些进步，我觉得离取代 xorg 只剩最后一步了（&lt;strong>Electron 输入法问题&lt;/strong>）。&lt;/p>
&lt;h2 id="nvidia-显卡的配置intel-和-amd-显卡无需配置">nvidia 显卡的配置（intel 和 AMD 显卡无需配置）
&lt;/h2>&lt;p>5.18 及之后的内核需要在内核启动参数中添加 ibt=off，才可以启动成功&lt;/p>
&lt;h3 id="nvidia-单显卡包括开启独显直连的情况">nvidia 单显卡（包括开启独显直连的情况）
&lt;/h3>&lt;p>如果不开独显直连，那安装很简单，开了的话会复杂一点，类似于 nvidia 主机装 wayland.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">GBM_BACKEND=nvidia-drm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">__GLX_VENDOR_LIBRARY_NAME=nvidia
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>需要把这两行添加到 &lt;code>/etc/profile&lt;/code> 中，然后修改内核 &lt;code>/etc/defualt/grub&lt;/code>&lt;/p>
&lt;p>也就是在这一行后面添加 &lt;code>nvidia-drm.modeset=1&lt;/code>，也可以启动的时候添加，但每次都需要操作，麻烦，改完之后如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">GRUB_CMDLINE_LINUX_DEFAULT=&amp;#34;quiet udev.log_priority=3 nvidia-drm.modeset=1&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后使用 &lt;code>update-grub&lt;/code>（没有的话 AUR 安装）命令更新 grub，重启就可以使用 wayland-session 了，如果没有这个命令，或者直接&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="也可以直接修改-bootgrubgrubcfg-文件不过不太安全慎用">也可以直接修改 /boot/grub/grub.cfg 文件，不过不太安全，慎用。
&lt;/h2>&lt;h3 id="in-双显卡笔记本推荐方案">I+N 双显卡（笔记本推荐方案）
&lt;/h3>&lt;p>在不做专门配置的情况下，默认使用了 intel 核显，在有需要的时候通过 &lt;code>prime-run&lt;/code> 调用独显，因此不用过多的配置。但在 5.18 之后的内核仍然需要禁用 ibt。&lt;/p>
&lt;p>笔记本推荐使用双显卡，主要是因为 nvidia 对 wayland 支持实在太差，当然，如果你使用 x11，那么开独显直连也不错。&lt;/p>
&lt;h2 id="缩放功能的改进">缩放功能的改进
&lt;/h2>&lt;p>这个改进是 KDE 做的，因此只适用于 KDE，并且版本必须高于 5.26.&lt;/p>
&lt;p>之前有说到，xwayland 应用在 wayland 缩放下面会很糊，这是由于 xwayland 的缩放策略是直接按比例放大所导致的，而我之前给出的解决方案是&lt;strong>不缩放 wayland，而是使用大字体曲线救国&lt;/strong>，xwayland 应用在内部单独缩放。这样做能解决一些问题，但也带来了一些问题，例如不美观等。而 KDE5.26 提供了&lt;strong>x 应用单独缩放&lt;/strong>的功能，&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-f01949a210120b8b1587f7ec1d491df2_b.jpg"
width="600"
height="446"
srcset="https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-f01949a210120b8b1587f7ec1d491df2_b_hu_164b6651295254a2.jpg 480w, https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-f01949a210120b8b1587f7ec1d491df2_b_hu_f124a4026473e6e7.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="322px"
>&lt;/p>
&lt;p>可以看到 x11 应用可以单独走自身的缩放，经过测试，这个功能非常好。electron 应用对 wayland 支持较差，主要表现在中文输入法无法使用（目前无解），也就是说，在以前，你必须二选一：不缩放，使用 xwayland，拥有输入法功能；缩放，使用 wayland 后端，但输入法无了，只能用剪切板。而现在，你可以使用 xwayland 二者得兼。&lt;/p>
&lt;p>经过测试，&lt;strong>edge、vscode、vscode-insider 完全正常&lt;/strong>，无模糊现象。&lt;/p>
&lt;p>而其他平台对 wayland 支持越来越好，奇怪的问题或许会少很多。&lt;/p>
&lt;h3 id="一个小小的猜想">一个小小的猜想
&lt;/h3>&lt;p>之前有提到，我在双显卡模式下，无法外接显示器，这是因为 HDMI 和 TypeC 接口都是连接在 nvidia 显卡上导致的，因此，无法独显直连的笔记本修改了 nvidia 后端和 grub 之后，或许可以使用外接屏（纯猜想，我就不折腾了）&lt;/p>
&lt;p>现在的 linux 发行版对于 wayland 的支持都做得还算不错了，但是有些问题还是需要自己解决，所以很想写一篇体验文 + 排坑文。&lt;/p>
&lt;p>我所使用的桌面环境为 plasma 5.25 版本，从 X11 切换到 wayland 十分方便&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pacman -S plasma-wayland-session plasma-wayland-protocols qt5-wayland qt6-wayland xorg-xwayland
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>装上这些个玩意之后，就可以在 sddm 中看见 plasma(wayland) 选项，选择之后就可以进入 wayland 的 kde.&lt;/p>
&lt;p>从 设置 - 关于本系统 中可以看到图形平台为 &lt;strong>wayland&lt;/strong>.&lt;/p>
&lt;h2 id="wayland-的优点">wayland 的优点
&lt;/h2>&lt;p>整体动画和特效很惊艳，没有了 X11 那种山寨的感觉，纯 wayland 环境下完全没有屏幕撕裂，实时帧率远高于 X11 环境（gnome 尤其明显，kde 不仔细感受倒是看不出来）。&lt;/p>
&lt;h2 id="wayland-的缺点">wayland 的缺点
&lt;/h2>&lt;ul>
&lt;li>软件兼容性一般，许多应用还没有做适配，实际是跑在 xwayland 上面的。&lt;/li>
&lt;li>wine 兼容性不太好，wine-qq 容易出现拖影和花屏的情况（无解）。&lt;/li>
&lt;li>报废了绝大多数录屏和截图软件，必须寻找&lt;strong>适配 wayland&lt;/strong>的（建议 spectacle 和 obs-studio）。&lt;/li>
&lt;li>不能全局缩放，会导致字体模糊发虚，没找到解决方法，但是在一些应用中，可以手动指定启动参数，使应用单独缩放，并且字体不会发虚（KDE5.26 已经解决）。&lt;/li>
&lt;li>不再是 Client-Server 模式，天生远程功能差（可以用 wayvnc）。&lt;/li>
&lt;/ul>
&lt;p>整体来看，kde 在 wayland 下表现非常好，用作日常使用完全没有问题，但是最好在一开始，就先解决一些问题。&lt;/p>
&lt;h2 id="界面字体太小以解决安装-kde526-即可">界面字体太小（以解决，安装 KDE5.26 即可）
&lt;/h2>&lt;p>X11 下往往通过全局缩放来解决，但 wayland 下我们只能退而求其次，通过修改字体大小来解决。&lt;/p>
&lt;p>根据我测试，字体修改之后，UI 也被跟着一起修改了，不会出现奇怪的视觉效果，体验还不错（比起发虚）。&lt;/p>
&lt;p>设置 - 外观 - 字体&lt;/p>
&lt;p>将字号调大为之前的 n 倍即可&lt;/p>
&lt;p>然后在 edge、chrome、vscode 等 electron 软件中单独设置界面缩放。&lt;/p>
&lt;h2 id="alacritty-无法显示输入法">Alacritty 无法显示输入法
&lt;/h2>&lt;p>我使用 Alacritty 终端，在 wayland 下只能输入英文，所以我们用 X 启动它，在 /usr/share/applications/Alacritty.desktop 中修改带 Exec 的行为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> 3 TryExec=env WINIT_UNIX_BACKEND=x11 alacritty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4 Exec=env WINIT_UNIX_BACKEND=x11 alacritty
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>即可解决输入问题，其他终端类似。&lt;/p>
&lt;p>也可以更换支持 xwayland 和 wayland 的终端，例如 electerm 和 konsole，但这个软件性能太差，不推荐使用。&lt;/p>
&lt;p>7 月 22 日：我用回了 kde 自带的 konsole，慢点就慢点吧，还算好用。。。。&lt;/p>
&lt;h2 id="wechat-uos-字体太小">wechat-uos 字体太小
&lt;/h2>&lt;p>electron 应用大多数默认跑在 xwayland，&lt;strong>无法通过全局缩放方式解决（除非你能忍受字体发虚）在 KDE 中，已经不存在这个问题，x 应用能够单独设置缩放，绝对是个划时代功能。&lt;/strong>&lt;/p>
&lt;p>修改 /usr/share/applications/wechat-uos.desktop 中的 Exec 行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> 3 Exec=wechat-uos --force-device-scale-factor=1.5 %U
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以缩放为之前的 1.5 倍&lt;/p>
&lt;p>部分软件可以实现缩放（&lt;strong>迅雷&lt;/strong>也可以），部分不行（例如 steam），感觉基于 electron 开发的大多数都可行。&lt;/p>
&lt;p>我们也可以指定参数跑在 wayland 上（后文）&lt;/p>
&lt;p>6 月 20 日更新&lt;/p>
&lt;h2 id="steam-游戏问题">steam 游戏问题
&lt;/h2>&lt;p>steam 上的一些游戏是支持 wayland 的，但也有个别不支持，比如 dota2&lt;/p>
&lt;p>steam 允许为每个游戏单独指定运行环境&lt;/p>
&lt;p>右键 dota2-属性 - 启动选项&lt;/p>
&lt;p>填入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">SDL_VIDEODRIVER=x11 prime-run %COMMAND% -perfectworld
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>SDL_VIDEODRIVER=x11：以 x11 运行游戏&lt;/p>
&lt;p>prime-run：使用独显运行（仅限 nvidia 双显卡，&lt;strong>独显直连无需操作&lt;/strong>）&lt;/p>
&lt;p>%COMMAND% （启动命令）&lt;/p>
&lt;p>-perfectworld（进入国服）&lt;/p>
&lt;p>进入游戏之后没有自动全屏，需要根据你的快捷键设置（我是 F11）手动全屏&lt;/p>
&lt;h3 id="题外话">题外话
&lt;/h3>&lt;p>steam 本身也是不支持 wayland 的，他本身就跑在 xwayland 上&lt;/p>
&lt;p>启动 steam 后输入命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">xlsclients -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到输出有：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;user&amp;gt; electron
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;user&amp;gt; microsoft-edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;user&amp;gt; steam
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>steam、edge 和 icalingua++（就是那个 electron）都是跑在 xwayland 上的，wechat-uos 也是跑在 xwayland 上。&lt;/p>
&lt;h3 id="steam-的缩放功能">steam 的缩放功能
&lt;/h3>&lt;p>steam 无法使用系统的缩放比例，但它本身是可以缩放的，在 steam.desktop 文件的 Exec 行添加&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">GDK_SCALE=2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>就可以进行 2 倍缩放，目前只支持两倍，所以 1080p 的用户就忍忍吧，2k 可以 2 倍没有问题&lt;/p>
&lt;h2 id="将-electron-应用跑在-wayland-上">将 electron 应用跑在 wayland 上
&lt;/h2>&lt;p>很简单，加参数就行，仍然以 wechat-uos 为例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo vim /usr/share/applications/wechat-uos.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="启动选项修改为">启动选项修改为
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Exec=wechat-uos --enable-features=UseOzonePlatform --ozone-platform=wayland %U
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>注意，wayland 参数与前文缩放参数只能选一个，否则无法启动！！&lt;/strong>&lt;/p>
&lt;p>&lt;strong>electron12 及以后的程序几乎都可以这么设置&lt;/strong>&lt;/p>
&lt;p>&lt;strong>发现一件有趣的事：wechat-uos 可以通过 ctrl+&amp;quot;+&amp;ldquo;进行放大，不必指定参数，直接冲 wayland 吧。&lt;/strong>&lt;/p>
&lt;p>&lt;strong>又发现一件可悲的事，wayland 下的 electron 输入法直接无了，只能依靠剪切板，如何抉择，见仁见智了。&lt;/strong>&lt;/p>
&lt;p>听说等 wayland 支持 gtk4 之后，输入法问题将会解决。&lt;/p>
&lt;hr>
&lt;p>7 月 23 日 更新一波&lt;/p>
&lt;h2 id="多屏显示问题已解决">多屏显示问题（已解决）
&lt;/h2>&lt;p>在我的设备上 wayland-session 无法检测到第二块屏幕，无论是 kde 还是 gnome。&lt;strong>切换到 x11 后均正常&lt;/strong>，但是我查了很多资料，都没能解决这个问题。。。所以欢迎已经解决这个问题的朋友教教我（求）。&lt;/p>
&lt;p>&lt;strong>2022.10 月更新&lt;/strong>&lt;/p>
&lt;p>这是由于笔记本 HDMI 接口和 T-c 接口直连了 nvidia 显卡导致的解决方案在最上面已经给出，但目前只是猜想（不想拿主力机做实验了）&lt;/p>
&lt;h2 id="腾讯会议问题">腾讯会议问题
&lt;/h2>&lt;p>众所周知，腾讯会议不支持 wayland，可以用，但不能使用屏幕分享，解决方案：使用 obs 的虚拟摄像头连接屏幕，然后腾讯会议连摄像头即可&lt;/p>
&lt;h3 id="安装-obs-studio">安装 obs-studio
&lt;/h3>&lt;p>据说在 gnome 上有一个专门的录屏软件，叫做 **kooha，**不过我用的是 kde，这款软件在 kde 上是无法使用的，所以我们最好通过 OBS Studio 进行录屏。&lt;/p>
&lt;p>但是要确保你安装使用了 pipewire.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pacman -S obs-studio
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>除此之外，还需要安装两个软件包&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pacman -S xdg-desktop-portal-wlr libpipewire02
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果不安装这两个软件包，在 obs 中是不会显示 &lt;strong>屏幕采集 (pipewire) 选项的。&lt;/strong>&lt;/p>
&lt;p>安装好之后打开 obs&lt;/p>
&lt;p>![]((20221025)2022_年用 Wayland 开启 linux_EberyThingSay/v2-e32ea9af148b5d86a93ea0081d691ef2_b.jpg)&lt;br>
然后就可以进行 屏幕录制，视频播放器我选择了 mpv，非常好用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pacman -S mpv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装-v4l2loopback-虚拟摄像机功能">安装 v4l2loopback 虚拟摄像机功能
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S v4l2loopback
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新版 obs 已经原生支持虚拟摄像机，所以无需过多配置&lt;/p>
&lt;p>重点是下面两个命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo modprobe --remove v4l2loopback
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo modprobe v4l2loopback &lt;span class="nv">devices&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>第一行是移除虚拟相机&lt;/p>
&lt;p>第二行是添加虚拟相机&lt;/p>
&lt;p>可以 alias 一下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> &lt;span class="nv">vcam&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;sudo modprobe --remove v4l2loopback &amp;amp;&amp;amp; sudo modprobe v4l2loopback devices=2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样每次 vcam 一下就可以开启虚拟摄像机功能了&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-6205a336f5e9cce5d11afe9d9fb8f5b9_b.jpg"
width="600"
height="441"
srcset="https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-6205a336f5e9cce5d11afe9d9fb8f5b9_b_hu_288ed7a5f1e8c974.jpg 480w, https://songguokunsgg.github.io/p/2022-%E5%B9%B4%E7%94%A8-wayland-%E5%BC%80%E5%90%AF-linux/v2-6205a336f5e9cce5d11afe9d9fb8f5b9_b_hu_edae84a80fc748f8.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="136"
data-flex-basis="326px"
>&lt;br>
如果点了虚拟摄像机没反应，vcam 一下就行了，这个摄像机将会出现在腾讯会议中，实现屏幕共享。&lt;/p>
&lt;p>&lt;strong>其他直播软件，包括钉钉在内，只要可以连接摄像头，理论上都是可行的&lt;/strong>&lt;/p></description></item><item><title>KDE+i3 配置全功能平铺式桌面（Arch）</title><link>https://songguokunsgg.github.io/p/kde-i3-%E9%85%8D%E7%BD%AE%E5%85%A8%E5%8A%9F%E8%83%BD%E5%B9%B3%E9%93%BA%E5%BC%8F%E6%A1%8C%E9%9D%A2arch/</link><pubDate>Sun, 19 Jun 2022 15:38:08 +0000</pubDate><guid>https://songguokunsgg.github.io/p/kde-i3-%E9%85%8D%E7%BD%AE%E5%85%A8%E5%8A%9F%E8%83%BD%E5%B9%B3%E9%93%BA%E5%BC%8F%E6%A1%8C%E9%9D%A2arch/</guid><description>&lt;p>&lt;strong>此方法仅适用于 plasma 5.24 及之前的版本，今天是 2022 年 6 月 17 日，最新的 Plasma 5.25.0 已经无法使用这个方法，请不要再继续！！如何查看 plasma 版本：&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S neofetch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neofetch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>输出内容中即可看见 plasma 版本&lt;/strong>&lt;/p>
&lt;p>5.18 内核滚挂之后，我的 i3wm 也跟着挂了，不过所幸我在 gitee 上有配置备份。但之后的一段时间用了 KDE+KWin 的平铺脚本，最开始的体验还不错，但随着时间的推移，一些 bug 开始暴露出来，不禁让我怀念起 i3wm，但是 i3 也有一些显示上的 bug……没办法，我觉得在 KDE 上使用 i3 也许是个不错的选择。&lt;/p>
&lt;h2 id="判断你是否需要-kdei3">判断你是否需要 KDE+i3
&lt;/h2>&lt;h3 id="适合-i3-的人">适合 i3 的人
&lt;/h3>&lt;ol>
&lt;li>喜欢平铺式窗口管理器&lt;/li>
&lt;li>喜欢极简桌面&lt;/li>
&lt;li>对效率要求大于美化&lt;/li>
&lt;li>不追求边边角角的功能配置&lt;/li>
&lt;li>年轻，有精力折腾&lt;/li>
&lt;/ol>
&lt;h3 id="适合-kde-的人">适合 KDE 的人
&lt;/h3>&lt;ol>
&lt;li>不爱折腾&lt;/li>
&lt;li>不喜欢写配置文件&lt;/li>
&lt;li>偶尔用用，保留了 win 的使用习惯&lt;/li>
&lt;li>不爱用命令行&lt;/li>
&lt;/ol>
&lt;p>以上均为我个人瞎 bb，请勿以此人身攻击&lt;/p>
&lt;h3 id="kdei3-你将获得">KDE+i3 你将获得
&lt;/h3>&lt;ol>
&lt;li>KDE 的全功能（KWin 除外：废话）&lt;/li>
&lt;li>完善的平铺式窗口管理器&lt;/li>
&lt;li>一些 bug（难免的）&lt;/li>
&lt;li>比纯 i3 大得多的内存占用&lt;/li>
&lt;/ol>
&lt;p>如果你觉得可以接受，就可以进行下一步了。这里需要说明一下，今天时间为 2022 年 6 月 7 日，高考的第一天，plasma 版本为 5.24.5，如果看到这里你不知道以下名词的概念和区别，请不要再继续&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">plasma kde WM DE 滚挂 平铺 konsole vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="安装-i3-所需的软件">安装 i3 所需的软件
&lt;/h2>&lt;p>KDE 已经自带了不少的系统软件，但是 KDE 的特效合成器与壁纸管理与 i3 是独立的，所以我们需要针对 i3 进行单独配置。主要为以下三个&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S i3 picom feh alacritty
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中 picom 为特效管理器，管理 i3 的窗口动画，透明等等，feh 则负责管理 i3 的壁纸&lt;/p>
&lt;p>其他的软件，例如 wifi 管理，蓝牙，剪切板，应用启动器都在 KDE 中带有了，无需额外配置。还有一个重要的东西是终端，我不喜欢 KDE 的终端 konsole，所以以 alacritty 为例.（konsole 在 i3 中不一定能用，推荐更换 i3 常用的终端，例如 alacritty、kitty、st 等）&lt;/p>
&lt;p>还有，选 i3 仓库的时候选 i3-wm , 别选 i3-gaps 否则屏幕周边会有大边框很难看。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">:: 在组 i3 中有 5 成员：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:: 软件仓库 community
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1) i3-gaps 2) i3-wm 3) i3blocks 4) i3lock 5) i3status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">输入某个选择 ( 默认=全部选定 ):2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="将-kde-的-wm-从-kwin-更换为-i3">将 KDE 的 WM 从 KWin 更换为 i3
&lt;/h2>&lt;h3 id="添加自启动脚本适用某个用户">添加自启动脚本（适用某个用户）
&lt;/h3>&lt;p>在某个位置创建一个 sh 脚本（以/usr/local/）为例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim /usr/local/kde-i3.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>加入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nb">export&lt;/span> &lt;span class="nv">KDEWM&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/i3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加执行权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo chmod +x /usr/local/kde-i3.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>意为将 KDEWM 这个变量设为 /usr/bin/i3&lt;/p>
&lt;p>然后将这个脚本添加到 KDE 的开机启动中：&lt;/p>
&lt;p>设置—开机与关机—自动启动&lt;/p>
&lt;p>然后添加一个软链接&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd $HOME/.config/plasma-workspace/env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo ln -s /usr/local/kde-i3.sh ./
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当然也可以一步到位&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo ln -s /usr/local/kde-i3.sh $HOME/.config/plasma-workspace/env/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>根据官方的说法，这个软链接是为了让这个脚本在会话启动之前执行，但设置里面不提供这个选项了，所以只能通过软链接的方式进行。&lt;/p>
&lt;h3 id="添加-xsession-会话用于所有用户">添加 XSession 会话（用于所有用户）
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /usr/share/xsessions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在不同的发行版中，XSession 文件位置有所不同，需要根据实际情况确定，Arch 下面是这个路径。复制一份 plasma.desktop 文件为 plasma-i3.desktop&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cp plasma.desktop plasma-i3.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开 plasma-i3.desktop&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim plasma-i3.desktop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最顶上有如下内容&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> 1 [Desktop Entry]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2 Type=XSession
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3 Exec=/usr/bin/startplasma-x11
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4 TryExec=/usr/bin/startplasma-x11
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5 DesktopNames=KDE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 6 Name=Plasma (X11)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 7 Name[ar]=ﺏﻻﺰﻣﺍ (ﺎﻜﺳ )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8 Name[ast]=Plasma (X11)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 9 Name[az]=Plasma (X11)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10 Name[ca]=Plasma (X11)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>需要注意的是 Exec 和 TryExec 所在的两行，将它们修改为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> 3 Exec=/usr/share/xsessions/start.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4 TryExec=/usr/share/xsessions/start.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后编辑 start.sh，加入如下内容&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nb">export&lt;/span> &lt;span class="nv">KDEWM&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin/i3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/startplasma-x11
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加执行权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo chmod +x start.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置-i3">配置 i3
&lt;/h2>&lt;p>这一步比较复杂，我很想把我的配置贴出来，但是……&lt;/p>
&lt;p>gitee 审核不通过！！！（因为我壁纸也放在配置文件夹，全是二次元美少女）&lt;/p>
&lt;p>所以这里的话我手动贴一些配置……&lt;/p>
&lt;p>i3 的配置文件位于 ~/.config/i3/config&lt;/p>
&lt;h3 id="配置-config">配置 config
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># i3 配置文件(sukipai)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">####################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># i3wm 基础设置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">####################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 基础按键设置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">mod&lt;/span> &lt;span class="n">Mod4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">left&lt;/span> &lt;span class="n">j&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">right&lt;/span> &lt;span class="n">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">up&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">set&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">down&lt;/span> &lt;span class="n">k&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 标题字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">font&lt;/span> &lt;span class="n">pango&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Source&lt;/span> &lt;span class="n">Code&lt;/span> &lt;span class="n">Pro&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Title format&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">title_align&lt;/span> &lt;span class="n">center&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Hide borders&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">hide_edge_borders&lt;/span> &lt;span class="n">none&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default_border&lt;/span> &lt;span class="n">none&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default_floating_border&lt;/span> &lt;span class="n">none&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># default windows layout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">workspace_layout&lt;/span> &lt;span class="n">tabbed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># i3 gaps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># gaps inner i3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># reload the configuration file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bindsym&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># restart i3 inplace (can be used to upgrade i3)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bindsym&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">Shift&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="n">restart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># exit i3 (logs you out of your X session)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># bindsym Mod4+Shift+e exec &amp;#34;i3-nagbar -t warning -f &amp;#39;pango: Microsoft YaHei 12&amp;#39; -m &amp;#39;Do you really want to exit i3?&amp;#39; -b &amp;#39;Yes, exit i3&amp;#39; &amp;#39;i3-msg exit&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Theme colors&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># gruvbox theme&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># class border backgr. text indicator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">focused&lt;/span> &lt;span class="c1">#3c3836 #32302f #fabd2f #fabd2f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">focused_inactive&lt;/span> &lt;span class="c1">#3c3836 #504945 #d5c4a1 #504945&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unfocused&lt;/span> &lt;span class="c1">#3c3836 #504945 #d5c4a1 #504945&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">urgent&lt;/span> &lt;span class="c1">#7c6f64 #fabd2f #3c3836 #fabd2f&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这一部分主要为外观，说几点：&lt;/p>
&lt;ol>
&lt;li>Mod4 指 win 键&lt;/li>
&lt;li>exit i3 的配置建议注释掉，有 kde 在，我们不需要这个功能，反而给自己找麻烦。&lt;/li>
&lt;/ol>
&lt;h3 id="配置按键">配置按键
&lt;/h3>&lt;p>仍然是在 config&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#############
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 快捷键
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#############
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## application binding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># start a terminal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Return exec --no-startup-id alacritty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## i3wm binding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Use Mouse+$mod to drag floating windows
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">floating_modifier $mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kill focused window
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+q kill
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># change focus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+$right focus right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># alternatively, you can use the cursor keys:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Left focus left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Down focus down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Up focus up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Right focus right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># move focused window
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$dowm move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+$right move right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># alternatively, you can use the cursor keys: bindsym $mod+Shift+Left move left
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Down move down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Up move up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+Right move right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># split in horizontal orientation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+h split h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># split in vertical orientation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+v split v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># enter fullscreen mode for the focused container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+f fullscreen toggle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># change container layout (stacked, tabbed, toggle split)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+s layout stacking
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+w layout tabbed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+e layout toggle split
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># toggle tiling / floating
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+space floating toggle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># change focus between tiling / floating windows
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+space focus mode_toggle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># focus the parent container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+a focus parent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">####################
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Workspace behavier
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">####################
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># set workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws1 &amp;#34;1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws2 &amp;#34;2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws3 &amp;#34;3&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws4 &amp;#34;4&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws5 &amp;#34;5&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws6 &amp;#34;6&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws7 &amp;#34;7&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws8 &amp;#34;8&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws9 &amp;#34;9&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set $ws10 &amp;#34;10&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># switch to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+1 workspace number $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+2 workspace number $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+3 workspace number $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+4 workspace number $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+5 workspace number $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+6 workspace number $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+7 workspace number $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+8 workspace number $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+9 workspace number $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+0 workspace number $ws10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># move focused container to workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+1 move container to workspace number $ws1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+2 move container to workspace number $ws2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+3 move container to workspace number $ws3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+4 move container to workspace number $ws4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+5 move container to workspace number $ws5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+6 move container to workspace number $ws6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+7 move container to workspace number $ws7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+8 move container to workspace number $ws8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+9 move container to workspace number $ws9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bindsym $mod+Shift+0 move container to workspace number $ws10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这一部分就不多说了，基本都是这样配置的。&lt;/p>
&lt;h3 id="配置-picom-和-feh">配置 picom 和 feh
&lt;/h3>&lt;h3 id="picom">picom
&lt;/h3>&lt;p>还是 config……&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exec --no-startup-id picom --config ~/.config/i3/picom/picom.conf -b --experimental-backends
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>意思是自启动 picom 并读取位于 ~/.config/i3/picom/picom.conf 的配置文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Backend&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># glx mode have more performance, prevent tearing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">backend&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;glx&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># GLX backend&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">glx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stencil&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">glx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">front&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">glx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rebind&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pixmap&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">glx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">swap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">method&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># prevent flickering after wake up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">glx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">use&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">copysubbuffer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mesa&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Shadows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">radius&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">50&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">offset&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">offset&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.8&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exclude&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;class_g = &amp;#39;Dunst&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;class_g ?= &amp;#39;polybar&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;class_g ?= &amp;#39;fcitx&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;class_g ?= &amp;#39;fcitx5&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;class_g ?= &amp;#39;rofi&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;class_g = &amp;#39;i3-frame&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;window_type = &amp;#39;dnd&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;window_type = &amp;#39;tooltip&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;_GTK_FRAME_EXTENTS@:c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;_NET_WM_STATE@:32a *= &amp;#39;_NET_WM_STATE_HIDDEN&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">shadow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ignore&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shaped&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Opacity&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">active&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.93&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">inactive&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.85&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">frame&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">inactive&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opacity&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">override&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># to show inactive windows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">inactive&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dim&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">opacity&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rule&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;75:class_g = &amp;#39;Dunst&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;75:class_g = &amp;#39;i3-frame&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1"># fix: i3 titlebar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;99:class_g = &amp;#39;Vmware&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;99:class_g = &amp;#39;Shotwell&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;99:class_g = &amp;#39;Google-chrome&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Fading&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fading&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">delta&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ow">in&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">step&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.09&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">step&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.09&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exclude&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;class_g = &amp;#39;Dunst&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;class_g ?= &amp;#39;Vlc&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;class_g ?= &amp;#39;Fcitx&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;class_g ?= &amp;#39;fcitx&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;class_g ?= &amp;#39;Fcitx5&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;class_g ?= &amp;#39;fcitx5&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;class_g ?= &amp;#39;pycharm&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;window_type = &amp;#39;dnd&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;window_type = &amp;#39;tooltip&amp;#39;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;#34;_GTK_FRAME_EXTENTS@:c&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Other&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mark&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">wmwin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">focused&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mark&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ovredir&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">focused&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">use&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ewmh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">win&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">detect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rounded&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">corners&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">detect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vsync&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dbe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">unredir&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">possible&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">focus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exclude&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">detect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">transient&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">detect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">leader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Window type settings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wintypes&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tooltip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">fade&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">shadow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.9&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">focus&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">shadow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">shadow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">popup_menu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.9&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dropdown_menu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">opacity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.9&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># XSync&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">xrender&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sync&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>复制粘贴就行，你也可以自行更改，这个配置还算易读。&lt;/p>
&lt;h3 id="feh">feh
&lt;/h3>&lt;p>feh 一次只能设置一张图片，还是 config&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">feh --bg-fill --no-fehbg --randomize ~/.config/i3/wallpapers/src/1.png
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>~/.config/i3/wallpapers/src/1.png 为你的壁纸路径&lt;/p>
&lt;p>但我显然不满足于一张图片，我想要切换，所以可以写个脚本，这里我选择 lua 实现，你也可以选择写 bash 脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim ~/.config/i3/wallpapers/autochange.lua
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>内容如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">function sleep(n)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> os.execute(&amp;#34;sleep &amp;#34; .. n)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">while (true)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> os.execute(&amp;#34;feh --bg-fill --no-fehbg --randomize ~/.config/i3/wallpapers/src/*&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep(900)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>前提是你得装了 lua&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S lua
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后每过 15 分钟就会在 ~/.config/i3/wallpapers/src/* 下随机选取一张壁纸。&lt;/p>
&lt;h2 id="重启">重启
&lt;/h2>&lt;p>恭喜你，不出意外的话，已经可以使用了。&lt;/p></description></item><item><title>2022.5 archlinux 详细安装过程</title><link>https://songguokunsgg.github.io/p/2022.5-archlinux-%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/</link><pubDate>Fri, 13 May 2022 16:35:20 +0000</pubDate><guid>https://songguokunsgg.github.io/p/2022.5-archlinux-%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/</guid><description>&lt;p>2022 年 12 月 8 日小更新一波&lt;/p>
&lt;ul>
&lt;li>增加了 i3 的一些配置说明&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>2022 年 11 月 17 日小更新一波&lt;/p>
&lt;ul>
&lt;li>增加了一些双系统相关说明&lt;/li>
&lt;li>增加了终端字体推荐&lt;/li>
&lt;li>修改了一些错误内容&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>其实 arch 的安装不是一件很难的事情，但是随着时间的推移会出现一些坑，所以我记录一下安装过程。&lt;/p>
&lt;p>参考文章：&lt;/p>
&lt;p>&lt;a class="link" href="https://zhuanlan.zhihu.com/p/478075538" target="_blank" rel="noopener"
>https://zhuanlan.zhihu.com/p/478075538&lt;/a>本文分为三个部分进行讲解，第一部分是安装整个系统（不带图形界面），第二部分是安装桌面或者窗口管理器，第三部分是进行一些简单配置，第四部分是一些简单总结。&lt;/p>
&lt;p>本文讲解虽然较为详细，但是不建议纯小白尝试（跟着来也没啥问题。。。）建议你能够做对下列名词解释再继续：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim neovim nvim NVME SATA BIOS UEFI kernel Nvidia console bash :q ^X ^C
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果上述单词中 80% 以上不知道什么意思，建议左转 ubuntu 或者 deepin，对 linux 稍作了解之后再尝试 Arch。&lt;/p>
&lt;h2 id="1-系统安装">1. 系统安装
&lt;/h2>&lt;h3 id="11-进入-live-系统">1.1 进入 live 系统
&lt;/h3>&lt;p>其实这个 live 系统和 ubuntu 或者 manjaro 的 live 系统是完全一致的，只是有没有图形界面，以及系统安装程序的区别，在 arch 的 live 系统中，需要我们手动输入命令进行操作。&lt;/p>
&lt;ol>
&lt;li>制作启动盘的过程就不详细说了，建议使用 ventoy 进行制作（我们以 ventoy 为例），避免重复格式化 U 盘的问题，当然，使用 rufus 也是可以的，&lt;strong>不推荐&lt;/strong>使用&lt;strong>UltraISO，容易出问题。&lt;/strong>&lt;/li>
&lt;li>确认系统的引导方式是 UEFI,，如果不是，请进入 BIOS 开启。&lt;/li>
&lt;li>插入 U 盘，重启电脑，根据电脑型号按相应的键盘按键进入启动引导选择，选择刚刚 USB 启动器。进入 ventoy 界面，选取你下载的 ArchLinux 安装镜像（*.iso），进入 Arch 安装界面。&lt;/li>
&lt;li>选择画面中的第一项（Arch Linuxinstallmedium(x86_64,UEFI)），按回车键，待加载完成后，进入 ArchLinux 的 Live 环境。如果出现“root@archiso~#”，说明启动成功，已经进入终端。&lt;/li>
&lt;li>验证是否为 UEFI 启动（如果你确定已经是 UEFI 的话可以略过）&lt;br>
输入“ls /sys/firmware/efi/efivars”&lt;br>
输入这一行代码后，如果反馈目录不存在，则说明电脑没有以 UEFI 启动，需要重新执行步骤 3，不要继续，因为没有 UEFI 启动在后面写入引导的时候几乎绝对报错。如果有输出，说明电脑是以 UEFI 启动的。&lt;/li>
&lt;/ol>
&lt;h3 id="12-联网">1.2 联网
&lt;/h3>&lt;h3 id="arch-的系统镜像只有-800m并没有包含所有的系统文件所以网络是必要的">arch 的系统镜像只有 800m，并没有包含所有的系统文件，所以网络是必要的。
&lt;/h3>&lt;h3 id="121-电脑有-wifi-的情况跟参考文章中操作一致">1.2.1 电脑有 wifi 的情况，跟参考文章中操作一致
&lt;/h3>&lt;ol>
&lt;li>
&lt;ol>
&lt;li>输入“iwctl”进入 iwd 模式，也就是终端最前方有“[iwd]#”字样。&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>在 iwd 模式下输入“device list”，按回车（按回车是基本操作，所以下文省略），查询电脑的网卡。记住你的网卡号，一般是 wlan0 或者 wlan1（本文以多数情况 wlan0 为例）&lt;/li>
&lt;li>在 iwd 模式下输入“station wlan0 scan”，然后再输入“station wlan0 get-networks”，显示周围的 wifi 的 ssid 扫描结果。（如果你知道自己要连接的 wifi 名称，可以跳过这一步）&lt;/li>
&lt;li>在 iwd 模式下输入“station wlan0 connect &lt;ssid>”，如果是加密的 wifi，系统会提示输入 wifi 密码，如无意外，就连上网了。&lt;/li>
&lt;li>验证联网。按 ctrl+c 退出 iwd 模式，回到[root@archiso~]模式，输入“ping baidu.com”，如果有返回数据，说明已经连上网了。&lt;/li>
&lt;/ol>
&lt;h3 id="122-电脑没有-wifi-的情况">1.2.2 电脑没有 wifi 的情况
&lt;/h3>&lt;h3 id="这种情况下usb-无线网卡一般是用不了的因为-arch-的-iso-中不带有驱动而网店里的免驱网卡驱动需要在-aur-里才能找到因此只能考虑-usb-共享手机网络或者连接网线这个就不多说了">这种情况下，usb 无线网卡一般是用不了的，因为 arch 的 iso 中不带有驱动，而网店里的免驱网卡驱动需要在 AUR 里才能找到，因此，只能考虑 USB 共享手机网络，或者连接网线（这个就不多说了）。
&lt;/h3>&lt;ol>
&lt;li>（以 iphone 为例）选一根质量好的线，连上电脑的 usb 口即可。&lt;/li>
&lt;li>此时手机上会让你信任该设备，信任即可。&lt;/li>
&lt;li>打开热点，输入“ping baidu.com”，如果有返回数据，说明已经连上网了。&lt;/li>
&lt;/ol>
&lt;p>iphone 设备，以及 usb 接口的驱动在 live 系统中是存在的，所以非常简单，安卓设备也应该是类似的方法。但是有一点大坑需要注意，&lt;strong>usb 接口驱动需要在后续所安装的系统中单独安装，否则，重启之后是连不上手机的。&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S usbmuxd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="123-更新时间">1.2.3 更新时间
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">timedatectl set-ntp true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="13-磁盘分区">1.3 磁盘分区
&lt;/h3>&lt;p>以前的 arch 需要使用 fdisk 命令进行分区，劝退了不少人，现在提供了更人性化的 cfdisk 工具进行分区，操作简单很多了，操作过程与参考文章类似。&lt;/p>
&lt;ol>
&lt;li>输入“fdisk -l”，查看硬盘列表，SATA 硬盘或者机械硬盘是/dev/sdX，nvme 固态硬盘则显示/dev/nvme0nX。&lt;/li>
&lt;li>认准你想作为系统盘的硬盘（sda 的例子参考文章已经给出，所以我以/dev/nvme0n1 为例），输入“cfdisk /dev/nvme0n1”进入伪图形界面进行分区。&lt;/li>
&lt;li>参考划分大小如下&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>分区&lt;/th>
&lt;th>挂载点&lt;/th>
&lt;th>我划分的大小，仅供参考&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>/dev/nvme0n1p1&lt;/td>
&lt;td>/&lt;/td>
&lt;td>100g（软件包都会装在根目录，建议大一点）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>/dev/nvme0n1p2&lt;/td>
&lt;td>/boot/efi&lt;/td>
&lt;td>500m（不要低于 500m）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>/dev/nvme0n1p3&lt;/td>
&lt;td>/home&lt;/td>
&lt;td>60g（看个人情况，我的文件多为代码，占用空间较小）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>/dev/nvme0n1p4&lt;/td>
&lt;td>swap&lt;/td>
&lt;td>24g（交换空间，即虚拟内存）&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>注意：&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>&lt;strong>boot 分区一定是挂载到/boot/efi，后续挂载的时候会再提到。&lt;/strong>&lt;/li>
&lt;li>&lt;strong>home 分区在重装系统的时候是可以复用的，建议单独分区以避免丢失文件。&lt;/strong>&lt;/li>
&lt;li>&lt;strong>swap 视自己内存情况而定，一般 &amp;lt;= 电脑内存（我内存 16g，分了 24g swap 好像也没啥）&lt;/strong>&lt;/li>
&lt;/ol>
&lt;h3 id="14-分区格式化">1.4 分区格式化
&lt;/h3>&lt;p>依次输入下面的命令：（需要确认时输入“y”）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkfs.fat -F32 /dev/nvme0n1p2 (boot分区必须使用fat32格式)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkfs.ext4 /dev/nvme0n1p1 (/ 和 /home 一般使用ext4分区格式)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkswap /dev/nvme0n1p4 (swap分区使用swap格式)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swapon /dev/nvme0n1p4 (激活swap分区，不激活不会使用这部分空间)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkfs.ext4 /dev/nvme0n1p3 (/home分区)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>格式化结束之后，使用 lsblk 命令查看分区是否划分以及格式化正确&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nvme0n1 259:0 0 476.9G 0 disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p1 259:1 0 59.3G 0 part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p2 259:2 0 24G 0 part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p3 259:3 0 117.9G 0 part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p4 259:4 0 477M 0 part
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我这里跟例子分区顺序不太一样，请根据自己实际情况确定。&lt;/p>
&lt;h3 id="15-分区挂载">1.5 分区挂载
&lt;/h3>&lt;p>基本和参考文章中一样，但是他犯了一个严重错误，&lt;strong>boot 分区一定是挂载到/boot/efi，，而不是/efi&lt;/strong>&lt;/p>
&lt;p>依次输入下面的命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mount /dev/nvme0n1p1 /mnt (将 / 分区挂载到 live系统中的 /mnt 目录，此时 /mnt 目录就是我们所安装系统的 / 目录)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/boot/efi (在新系统的 / 目录中新建 efi 文件夹，-p 参数表示递归创建)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/nvme0n1p2 /mnt/boot/efi (将 boot 分区挂载到efi文件夹)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /mnt/home (同理，创建home目录)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/nvme0n1p3 /mnt/home (将home分区挂载到home目录)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>挂载完成之后会变成这样（根据你的实际分区情况显示）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nvme0n1 259:0 0 476.9G 0 disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p1 259:1 0 59.3G 0 part /home
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p2 259:2 0 24G 0 part [SWAP]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p3 259:3 0 117.9G 0 part /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─nvme0n1p4 259:4 0 477M 0 part /boot/efi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="16-安装必要的包并在系统中写入分区表">1.6 安装必要的包，并在系统中写入分区表
&lt;/h3>&lt;p>跟参考文章类似，但是，如果你使用 usb 分享网络，要多加一个 usbmuxd 包。&lt;/p>
&lt;p>换源：很重要，不然等到天荒地老。方法很多，可以直接修改/etc/pacman.d/mirrorlist 文件，也可以直接&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">reflector --country China --age 72 --sort rate --protocol https --save /etc/pacman.d/mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>解决问题，我一般还是手动换，即替换/etc/pacman.d/mirrorlist 中内容为（任选其一，建议第一个）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.cqu.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.dgut.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.neusoft.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.nju.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirror.redrock.team/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.xjtu.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装基本系统（包括 linux 内核以及基础软件包），这里相比参考文章多给了几个软件包，因为这些对用户来说还是比较重要的，有几种内核可以安装：&lt;/p>
&lt;ul>
&lt;li>普通内核 (linux linux-headers)&lt;/li>
&lt;li>lts 稳定版内核 (linux-lts linux-lts-headers)&lt;/li>
&lt;li>zen 内核 (linux-zen,linux-zen-headers)（高性能）&lt;/li>
&lt;/ul>
&lt;p>按自己的需求安装就可以&lt;/p>
&lt;p>&lt;strong>这里需要提前说一下，linux-zen 内核不支持 nvidia 显卡，有这个需求的就别装了，如果是原版 linux 内核的话，就要做好随时滚挂的准备，最近的 5.18 内核更新就会导致 nvidia-5.15 版本驱动失效无法开机（需要在启动选项中添加 ibt=off），如果你希望稳定使用，就选择 linux-lts 内核和 linux-lts-headers，并安装相应的 nvidia-lts 驱动（后面会有详细说明），不过不用太担心，即便是系统安装完成，你也可以随时切换自己想要的内核版本。&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacstrap /mnt base linux linux-headers linux-firmware base-devel （usbmuxd）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">或者
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacstrap /mnt base linux-lts linux-lts-headers linux-firmware base-devel （usbmuxd）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>写入分区表：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">genfstab -U /mnt &amp;gt;&amp;gt; /mnt/etc/fstab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>开机的时候，系统按照 fstab 文件的分区信息进行挂载，你也可以修改 fstab 以达到自动挂载某个磁盘的功能，例如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">UUID=86ABB6FEAA91229C /home/XXX/Documents ntfs-3g defaults 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>就可以把 UUID 为 86ABB6FEAA91229C 的 ntfs 分区挂载到 /home/XXX/Documents 下面（PS：双系统用这个方式挂载 win 盘很爽&lt;/p>
&lt;p>然后使用如下命令进入新系统，进入后会显示[root@archiso /]# 。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">arch-chroot /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="17-新系统的配置">1.7 新系统的配置
&lt;/h3>&lt;h3 id="171-安装必要软件包">1.7.1 安装必要软件包
&lt;/h3>&lt;p>参考文章给出的命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S vim iwd networkmanager ttf-dejavu sudo bluez
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我解释一下这都是干嘛的。&lt;/p>
&lt;ol>
&lt;li>vim：文本编辑器，可替代有 neovim，nano，其中 nano 对新手比较友好，推荐经验较少或者刚入坑的同志使用。&lt;/li>
&lt;li>iwd,networkmanager：用 iwd 作为 nm 的 backend 进行使用。（但是我这样使用在 i3 下会出现不少问题，比如网络经常自动断，且短时间无法重连等 (KDE 也会出现，但感觉没有 i3 频繁，我觉得可能是命令行的原因，&lt;strong>安装完成之后卸载&lt;/strong>掉 networkmanager 问题解决。另外，如果需要使用网线和 usb 网络共享，networkmanager 必须安装，最好加装一个 dhcpcd）&lt;/li>
&lt;li>ttf-dejavu：开源字体&lt;/li>
&lt;li>sudo：用于非 root 用户暂时获取 root 权限&lt;/li>
&lt;li>bluez：蓝牙模块&lt;/li>
&lt;li>usbmuxd：参考文章没给这个。现在系统中使用的网络来自于 live 系统，不装这个的话，重启是无法通过 usb 连接手机共享网络的，根据个人情况选择，建议安装。&lt;/li>
&lt;li>wqy-zenhei：中文字体，避免进入系统后无法显示中&lt;/li>
&lt;li>dhcpcd：连网线用&lt;/li>
&lt;li>ntfs-3g：挂载 ntfs 磁盘需要&lt;/li>
&lt;/ol>
&lt;p>我最后选择这样安装，所以后续以 vim 为例。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S neovim iwd ttf-dejavu sudo bluez usbmuxd networkmanager dhcpcd wqy-zenhei ntfs-3g
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>neovim 和 vim 的启动命令是不一样的，neovim 为“nvim”，vim 是“vim”我一般会通过软链接&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ln -s /bin/nvim /bin/vim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s /bin/nvim /bin/vi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将他们软链接起来看，这样的话，通过“vim”“vi”命令也可以启动 neovim 了。&lt;/p>
&lt;p>nano 的启动命令是“nano”&lt;/p>
&lt;h3 id="172-一通设置">1.7.2 一通设置
&lt;/h3>&lt;p>这一部分都是差不多的，也没啥坑。&lt;/p>
&lt;ol>
&lt;li>设置时区和时间&lt;/li>
&lt;/ol>
&lt;p>依次输入下面的命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime (设置时区为上海)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hwclock --systohc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>设置语言&lt;/li>
&lt;/ol>
&lt;p>输入“vim /etc/locale.gen”，删除【en_US.UTF-8】和【zh_CN.UTF-8】两项前面的“#”，保存。（如果有其他语言需求也可以自行取消注释，比如台湾地区和港澳地区）&lt;/p>
&lt;p>（vim 的光标移动、删除和保存退出等命令请另行百度），当然，也可以用 nano&lt;/p>
&lt;p>输入“locale-gen”，再输入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">echo LANG=en_US.UTF-8 &amp;gt;&amp;gt; /etc/locale.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>，意思是将 &amp;ldquo;en_US.UTF-8&amp;rdquo; 追加到 /etc/locale.conf 文件里面，这里不建议使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">echo LANG=zh_CN.UTF-8 &amp;gt;&amp;gt; /etc/locale.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样会使系统语言成为中文，从而导致 tty 显示中文，但是 tty 本身是不支持中文的，所以会乱码。而中文的问题，一般会通过修改 ~/.xprofile（DE）或者 ~/.xinitrc（WM）进行解决&lt;/p>
&lt;ol start="3">
&lt;li>设置 root 用户的密码&lt;/li>
&lt;/ol>
&lt;p>输入“passwd”，再输入密码，密码不会有任何显示，但是是输进去了的。&lt;/p>
&lt;ol start="4">
&lt;li>设置主机名（系统名）&lt;/li>
&lt;/ol>
&lt;p>输入“echo {你要设置的主机名，随便一个，不要大括号，不要中文名} &amp;raquo; /etc/hostname”，例如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">echo sukipai &amp;gt;&amp;gt; /etc/hostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>主机名会显示在 bash 中，例如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[sukipai@sukipai ~]$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>意为我用 sukipai(前) 用户登陆了名为 sukipai(后) 的主机。&lt;/p>
&lt;ol start="5">
&lt;li>设置网络&lt;/li>
&lt;/ol>
&lt;p>输入“vim /etc/hosts”，把下面的文字打进去，保存（以sukipai为例）。（vim的光标移动、删除和保存退出等命令请另行百度。）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">127.0.0.1 localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">::1 localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.1.1 sukipai.localdomain sukipai
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="173-安装引导并重启系统">1.7.3 安装引导并重启系统
&lt;/h3>&lt;p>与参考文章中安装引导有一些差异，输入下面的命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S grub efibootmgr (安装grub)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-install /dev/nvme0n1 (超级大坑，注意选择的是整个硬盘，而不是boot分区)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>一定要注意这个地方，是安装在整个磁盘，而不是 boot 分区。&lt;/p>
&lt;p>创建 grub 配置文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启系统（请再次确认你是否需要，且已经安装 usbmuxd）：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">exit (退出新系统，回到live系统)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">umount -R /mnt (递归卸载 /mnt 中的磁盘)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reboot (重启)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启之后登录到 root 账户，密码就是你之前设置的。&lt;/p>
&lt;h3 id="18-打开联网服务和蓝牙">1.8 打开联网服务和蓝牙
&lt;/h3>&lt;ol>
&lt;li>首先激活服务&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">systemctl start iwd.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable iwd.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start systemd-resolved.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable systemd-resolved.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable bluetooth.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable NetworkManager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable dhcpcd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>配置网络连接和 DNS&lt;/li>
&lt;/ol>
&lt;p>输入“vim /etc/iwd/main.conf”，把下面的文字打进去，保存。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[General]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">EnableNetworkConfiguration=true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NameResolvingService=systemd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>安装了 netwokmanager 的配置&lt;/li>
&lt;/ol>
&lt;p>如果安装了 networkmanager，则需要将 backend 服务修改为 iwd，总体上 iwd 比 wpa 好用很多。&lt;/p>
&lt;p>输入“vim /etc/NetworkManager/NetworkManager.conf”，把下面的文字打进去，保存。（vim的光标移动、删除和保存退出等命令请另行百度。）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[device]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wifi.backend=iwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果只安装 networkmanager 而不安装 iwd 的话，是不需要这一步的，nm 会使用默认的 wpa。（猜测）&lt;/p>
&lt;p>然后重启，并安装先前的联网方法进行联网，并&lt;strong>更换 mirrorlist 中的软件源 (如果前面更换过了，这里就不用更换了)&lt;/strong>，这里不再赘述。&lt;/p>
&lt;h3 id="19-安装一些硬件设备">1.9 安装一些硬件设备
&lt;/h3>&lt;ol>
&lt;li>CPU 编码&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S intel-ucode (intel的cpu装这个)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S amd-ucode (amd的cpu装这个)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注意是 &lt;strong>CPU&lt;/strong> 编码，不是显卡&lt;/p>
&lt;ol start="2">
&lt;li>显卡驱动&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S xf86-video-intel（Intel核心显卡驱动，用Intel核显就装，否则不用装）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S mesa nvidia(-lts) nvidia-settings nvidia-dkms nvidia-utils nvidia-prime（nvidia显卡驱动，用nvidia显卡就装，否则不用装）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S xf86-video-amdgpu (AMD显卡驱动，用amd显卡的就装)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里举两个例子，我的笔记本，i7-11 代，搭配 intel 核显以及 3050 显卡，所以安装前两个。我的台式机，e3-1230 垃圾 CPU，搭配 HD6950 显卡，所以装第三个。nvidia-dkms 与 nvidia-lts 不兼容，如果装 lts 驱动的话无需安装 dkms。&lt;/p>
&lt;p>&lt;strong>注意：nvidia 驱动的安装与前面选择的内核有关，如果你安装的是 linux-lts 内核，那么需要将 nvidia 更换为 nvidia-lts，linux-zen 不支持 nvidia 显卡（务必对号入座），如果你选择安装新内核，则需要修改一下 ibt=off，否则无法进入系统&lt;/strong>&lt;/p>
&lt;ol start="3">
&lt;li>声卡驱动&lt;/li>
&lt;/ol>
&lt;p>在我的设备上，只需这样安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S pipewire (alsa-utils) pipewire-pulse pipewire-jack pipewire-alsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>就可以了，使用参考文章中的 pulseaudio 也是可以的。alsa-utils 用于终端下的音量调节，如果你使用 KDE，Gnome 等桌面环境，可以不装这个。&lt;/p>
&lt;p>使用 pulseaudio 的话，需要进行一下配置（我没试过），pipewire 则不用：&lt;/p>
&lt;p>输入“vim /etc/modprobe.d/disable_dmic.conf”，把下面的文字打进去，保存。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">options snd_hda_intel dmic_detect=0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="110-创建一个用户">1.10 创建一个用户
&lt;/h3>&lt;p>仍然以 sukipai 为例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">useradd -m -G wheel -s /bin/bash sukipai (添加一个名为sukipai的用户进入wheel用户组，并将bash作为启动命令)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">passwd sukipai (设置密码，和设置root是类似的)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后输入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">visudo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果报错的话 (应该不会)，就改为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim /etc/sudoers
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>找到如下内容，取消掉“# %wheel ALL=(ALL:ALL) ALL”前面的“# ”&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## User privilege specification
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root ALL=(ALL:ALL) ALL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Uncomment to allow members of group wheel to execute any command
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># %wheel ALL=(ALL:ALL) ALL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Same thing without a password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># %wheel ALL=(ALL:ALL) NOPASSWD: ALL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里说一下，取消“# %wheel ALL=(ALL:ALL) NOPASSWD: ALL”前的“# ”也是可以的，区别就在于，取消这一行后，wheel 组的用户使用 sudo 就不用输密码了，&lt;strong>如果你是新手，不建议这么做&lt;/strong>，如果你是老鸟，可以考虑取消 NOPASSWD 所在的这一行。（我取消的是 NOPASWD 这行，图方便）&lt;/p>
&lt;p>下面还有个 sudo 组的选项，但是我没有试过加入 sudo 组是什么效果，这里就不多说了。&lt;/p>
&lt;h3 id="111-重启系统">1.11 重启系统
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此时的系统已经基本可以使用了，但是还没有配置图形界面，如果你不需要图形界面，就只需登陆 sukipai 用户就可以使用了。&lt;/p>
&lt;h2 id="2-图形界面安装">2. 图形界面安装
&lt;/h2>&lt;p>&lt;strong>！！！注意：从这里开始，如果登陆的是普通用户，则所有的 pacman 和 systemctl 都需要 sudo，如果嫌麻烦，可以先在 ~/.bashrc 中添加“alias pacman=&amp;lsquo;sudo pacman&amp;rsquo;和 alias systemctl=&amp;lsquo;sudo systemctl&amp;rsquo;”，我这里就不多写 sudo 了。如果提示需要权限，同样加 sudo 即可。所以这部分安装建议登陆 root 用户。&lt;/strong>&lt;/p>
&lt;h3 id="首先需要选择-x11-或者是-wayland现在来看-wayland-是比较先进的但为了方便和兼容性还是用-x11-吧">首先需要选择 X11 或者是 Wayland，现在来看 Wayland 是比较先进的，但为了方便和兼容性还是用 X11 吧。
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S xorg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个是必须安装的，后面的 DE 和 WM 都是基于 x 服务。&lt;/p>
&lt;h3 id="21-kde">2.1 KDE
&lt;/h3>&lt;p>特点：美观，比较稳定，自定义功能强大，配置方便（最推荐）（括号中为推荐的可替代品）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S plasma sddm konsole dolphin kate ark okular spectacle yay
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>plasma：桌面环境&lt;/p>
&lt;p>sddm：登录管理器，KDE 配套的&lt;/p>
&lt;p>konsole：kde 下的终端，功能多但是比较慢，也可以使用其他终端&lt;/p>
&lt;p>（alacritty,kitty）&lt;/p>
&lt;p>kate：文本编辑器，很强大，但是资料比较少，需要自己配置。我感觉比 vscode 好用很多，但是没火起来，很可惜。&lt;/p>
&lt;p>（vim,neovim,gvim,nano,gedit,sublime,vscode,atom）（sublime,vscode 需要在 AUR 源或者 Clansty 源中安装）&lt;/p>
&lt;p>ark：解压与压缩&lt;/p>
&lt;p>okular：PDF 查看器&lt;/p>
&lt;p>（wps,edge,chrome,zotero……）&lt;/p>
&lt;p>spectacle：截图工具，这三件套配合 KDE 很方便&lt;/p>
&lt;p>安装完成之后，需要启用 sddm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">systemctl enable sddm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启即可&lt;/p>
&lt;h3 id="22-gnome">2.2 Gnome
&lt;/h3>&lt;p>特点：自定义功能丰富（但是被阻隔了），&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S gnome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl enable gdm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启即可，部分软件仍然可以用上述软件替代&lt;/p>
&lt;h3 id="23-i3">2.3 i3
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S xorg-xinit xorg-server （窗口管理器一般不会使用登陆管理器(dm)，所以xorg-xinit是必要的）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S i3 (安装i3，或者i3-gaps)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>由于窗口管理器配置比较复杂，所以这里只讲最基本的安装。&lt;/p>
&lt;p>&lt;strong>在此之前，先补充一下用户登陆的时候发生了什么事。&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>用户输入账户 sukipai 以及密码，正确。&lt;/li>
&lt;li>tty 会解释执行用户目录下的 .bashrc 文件（如果你用的 zsh，则读取.zshrc，以此类推），相当于手动执行 source &lt;del>/.bashrc，（&lt;/del> 表示用户目录，我这里为/home/sukipai/）&lt;/li>
&lt;li>此时登陆到了 tty1&lt;/li>
&lt;li>你想要进入 i3，则需要执行 startx 命令&lt;/li>
&lt;li>startx 会执行 ~/.xinitrc 中的内容&lt;/li>
&lt;/ol>
&lt;p>所以我们的逻辑就很清楚了，如果你想要自动登陆 i3，就需要修改.bashrc 中的逻辑，而 startx 时要做的事情，就需要写在 ~/.xinitrc 文件中。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">LANG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zh_CN&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UTF&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span> &lt;span class="c1"># 将语言环境设置为中文&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">xrdb&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">merge&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">Xresources&lt;/span> &lt;span class="c1"># 读取~/.Xresources 文件中的信息，我用来修改dpi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">exec&lt;/span> &lt;span class="n">i3&lt;/span> &lt;span class="c1"># 进入i3wm&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为什么要把“export LANG=zh_CN.UTF-8”写在 ~/.xinitrc 里面，是因为，如果你不想进入图形界面，那么你就会停留在 tty，而 tty 本身是不支持中文的。此时，LANG 的值仍然是之前所设置的“en_US.UTF-8”就不会出现乱码的问题，如果把这句话写在 ~/.bashrc 中，那么每次一登陆就会将语言修改为中文，导致 tty 永远处在乱码状态。&lt;/p>
&lt;p>说明一下.Xresources 文件，这个文件可以用来调节 dpi（默认 96），适合高分辨率屏幕，加入以下内容即可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Xft.dpi: 192
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>里面的数字填 ( 放大倍数 ) * 96 就可以了，比如 192 就是放到 200%，给个简单参考&lt;/p>
&lt;ul>
&lt;li>15.5 寸笔记本，1920x1080，填 144&lt;/li>
&lt;li>15.5 寸笔记本，2560x1440，填 192&lt;/li>
&lt;li>如果觉得太大了，可以调小，建议为 25% 的倍数&lt;/li>
&lt;/ul>
&lt;p>那么如何设置自动进入 i3 桌面呢？很简单，将一下代码贴在 ~/.bashrc 中即可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">if [ -z &amp;#34;${DISPLAY}&amp;#34; ] &amp;amp;&amp;amp; [ &amp;#34;${XDG_VTNR}&amp;#34; -eq 1 ]; then
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec startx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样我们就拥有了一个 i3wm 了。&lt;/p>
&lt;h2 id="3-后续的配置">3. 后续的配置
&lt;/h2>&lt;p>KDE,gnome,i3 等桌面环境的配置，就不在这里赘述了，每个人的需求不一样。&lt;/p>
&lt;h3 id="31-中文输入法">3.1 中文输入法
&lt;/h3>&lt;p>推荐使用 fcitx5&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">pacman&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">fcitx5&lt;/span> &lt;span class="n">fcitx5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">chinese&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">addons&lt;/span> &lt;span class="n">fcitx5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gtk&lt;/span> &lt;span class="n">fcitx5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qt&lt;/span> &lt;span class="n">fcitx5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configtool&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后添加环境变量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo vim /etc/environment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GTK_IM_MODULE=fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">QT_IM_MODULE=fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">XMODIFIERS=@im=fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INPUT_METHOD=fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SDL_IM_MODULE=fcitx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GLFW_IM_MODULE=ibus
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后设置开机启动即可（桌面环境不同，方法也不同），这里提供一个简单的思路。&lt;/p>
&lt;p>tty 下面是不需要中文输入法的（也用不了），所以修改 ~/.xinitrc，添加代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">fcitx5 -d &amp;amp; (后台运行fcitx5，且开机自启)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>wiki 上的描述&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">注意：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果您使用的桌面环境是兼容 XDG 的（例如 KDE、GNOME、Xfce、LXDE等），则 无需 此步骤（添加自启）。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果使用i3、awesome等窗口管理器，需要在其脚本中添加 Fcitx5 以实现自启动。例如，如果您使用 i3 或 sway ,可以在配置文件中添加exec --no-startup-id fcitx5 -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果使用dwm，则需要添加 autostart 补丁。在 ~/.dwm/autostart.sh 中添加fcitx5 -d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>根据需求自取即可。&lt;/p>
&lt;h3 id="32-添加-archlinuxcn-源并配置-yay">3.2 添加 archlinuxcn 源，并配置 yay
&lt;/h3>&lt;p>在装系统时我们已经将 /etc/pacman.d/mirrorlist 换为了国内源（有时候会玄学变回国外源，需要自己查看一下），所以只需要添加 archlinuxcn 即可。&lt;/p>
&lt;p>使用方法：在 /etc/pacman.conf 文件末尾添加以下两行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[archlinuxcn]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SigLevel = Optional TrustAll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果 SigLevel 那一行不加，后面安装 archlinuxcn-keyring 时不会报错的话，可以不加，但是我报错了所以加上了。&lt;/p>
&lt;p>这里有一个坑，要取消这两行前面的注释，不然有一部分 32 位包无法安装。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> 84 # [muiltilib]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 85 # Include = /etc/pacman.d/mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>之后安装 archlinuxcn-keyring 包导入 GPG key。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -Syyu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S archlinuxcn-keyring
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后运行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -S yay
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装 yay 即可，现在 yay 不能换国内源了，所以无需多余配置。电信网使用 yay 容易连不上，建议使用联通。&lt;/p>
&lt;p>安装终端字体，推荐 nerd-fonts-hack 需要 anchlinuxcn&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pacman -S nerd-fonts-hack
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="33-配置-zsh可选">3.3 配置 zsh（可选）
&lt;/h3>&lt;p>zsh 是一个非常好用的解释器，配置也不复杂。&lt;/p>
&lt;p>&lt;a class="link" href="https://zhuanlan.zhihu.com/p/345559097" target="_blank" rel="noopener"
>Linux 中国：配置一个简洁高效的 Zsh | Linux 中国&lt;/a>这里就不多赘述，直接开搞&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo pacman -Sy zsh zsh-autosuggestions zsh-syntax-highlighting zsh-theme-powerlevel10k zsh-completions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">（安装zsh以及相应组件）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chsh -s /usr/bin/zsh （修改为默认解释器）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后&lt;strong>把 ~/.bashrc 中的所有内容迁移到 ~/.zshrc&lt;/strong> ，没有就自己创建，并加入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">source /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后重启就可以使用了，可以删除掉 ~/.bashrc 和 ~/.bash_history 中的内容，因为已经不用了。&lt;/p>
&lt;p>再贴一份好用的配置文件，直接复制所有内容到 ~/.zshrc 最后就行了，然后按需修改，主要修改 alias 部分，以及删去 ibus 输入法相关配置。&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/u013566722/article/details/51231818" target="_blank" rel="noopener"
>zsh 配置文件_kuikuitage 的博客-CSDN 博客&lt;/a>链接里面的内容不太好复制，我这里直接贴上来吧 (一般来说，alias 和 function 用的比较多，其他内容不改就行)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">plugins&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">syntax&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">highlighting&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">syntax&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">highlighting&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zsh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">plugins&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autosuggestions&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autosuggestions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zsh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">powerlevel10k&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">powerlevel10k&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#color{{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autoload&lt;/span> &lt;span class="n">colors&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">colors&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#命令别名 {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alias&lt;/span> &lt;span class="n">cp&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;cp -i&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alias&lt;/span> &lt;span class="n">mv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;mv -i&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alias&lt;/span> &lt;span class="n">rm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;rm -i&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alias&lt;/span> &lt;span class="n">ls&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ls -a --color=auto&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alias&lt;/span> &lt;span class="n">grep&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;grep --color=auto&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#终端代理&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">proxy_on&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">export&lt;/span> &lt;span class="n">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">7890&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">export&lt;/span> &lt;span class="n">https_proxy&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">http_proxy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span> &lt;span class="s2">&amp;#34;终端代理已开启。&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">proxy_off&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">unset&lt;/span> &lt;span class="n">http_proxy&lt;/span> &lt;span class="n">https_proxy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span> &lt;span class="s2">&amp;#34;终端代理已关闭。&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">RED&lt;/span> &lt;span class="n">GREEN&lt;/span> &lt;span class="n">YELLOW&lt;/span> &lt;span class="n">BLUE&lt;/span> &lt;span class="n">MAGENTA&lt;/span> &lt;span class="n">CYAN&lt;/span> &lt;span class="n">WHITE&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eval&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;%{$terminfo[bold]$fg[${(L)color}]%}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eval&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;%{$fg[${(L)color}]%}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">((&lt;/span> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">count&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FINISH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;%{$terminfo[sgr0]%}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#命令提示符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RPROMPT&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$RED%D %T$FINISH&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PROMPT&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$CYAN%n@$YELLOW%M:$GREEN%/$_YELLOW&amp;gt;$FINISH &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#PROMPT=$(echo &amp;#34;$BLUE%M$GREEN%/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#$CYAN%n@$BLUE%M:$GREEN%/$_YELLOW&amp;gt;&amp;gt;&amp;gt;$FINISH &amp;#34;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#标题栏、任务栏样式{{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">TERM&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">xterm&lt;/span>&lt;span class="o">*|*&lt;/span>&lt;span class="n">rxvt&lt;/span>&lt;span class="o">*|&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dt&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="n">E&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">term&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">precmd&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nb">print&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Pn&lt;/span> &lt;span class="s2">&amp;#34;\e]0;%n@%M//%/&lt;/span>&lt;span class="se">\a&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">preexec&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nb">print&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Pn&lt;/span> &lt;span class="s2">&amp;#34;\e]0;%n@%M//%/\ $1&lt;/span>&lt;span class="se">\a&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#编辑器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">EDITOR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">vim&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#关于历史纪录的配置 {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#历史纪录条目数量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">HISTSIZE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#注销后保存的历史纪录条目数量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">SAVEHIST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#历史纪录文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">HISTFILE&lt;/span>&lt;span class="o">=~/.&lt;/span>&lt;span class="n">zhistory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#以附加的方式写入历史纪录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">INC_APPEND_HISTORY&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#如果连续输入的命令相同，历史纪录中只保留一个&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">HIST_IGNORE_DUPS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#为历史纪录中的命令添加时间戳&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">EXTENDED_HISTORY&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#启用 cd 命令的历史纪录，cd -[TAB]进入历史路径&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">AUTO_PUSHD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#相同的历史路径只保留一个&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">PUSHD_IGNORE_DUPS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#在命令前添加空格，不将此命令添加到纪录文件中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#setopt HIST_IGNORE_SPACE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#每个目录使用独立的历史纪录{{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cd&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">builtin&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="s2">&amp;#34;$@&amp;#34;&lt;/span> &lt;span class="c1"># do actual cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">W&lt;/span> &lt;span class="c1"># write current history file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">local&lt;/span> &lt;span class="n">HISTDIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;$HOME/.zsh_history$PWD&amp;#34;&lt;/span> &lt;span class="c1"># use nested folders for history&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">!&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="s2">&amp;#34;$HISTDIR&amp;#34;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">then&lt;/span> &lt;span class="c1"># create folder if needed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="s2">&amp;#34;$HISTDIR&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">export&lt;/span> &lt;span class="n">HISTFILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;$HISTDIR/zhistory&amp;#34;&lt;/span> &lt;span class="c1"># set new history file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">touch&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">HISTFILE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">local&lt;/span> &lt;span class="n">ohistsize&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">HISTSIZE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HISTSIZE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="c1"># Discard previous dir&amp;#39;s history&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HISTSIZE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">ohistsize&lt;/span> &lt;span class="c1"># Prepare for new dir&amp;#39;s history&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="c1">#read from current histfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">HOME&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">zsh_history&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">PWD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">HISTFILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;$HOME/.zsh_history$PWD/zhistory&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">allhistory&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">find&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">HOME&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">zsh_history&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">zhistory&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">convhistory&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sort&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">uniq&lt;/span> &lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sed&lt;/span> &lt;span class="s1">&amp;#39;s/^:[0−9]∗:[0-9]*;.∗/&lt;/span>&lt;span class="se">\1&lt;/span>&lt;span class="s1">::::::&lt;/span>&lt;span class="se">\2&lt;/span>&lt;span class="s1">/&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">awk&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">F&lt;/span>&lt;span class="s2">&amp;#34;::::::&amp;#34;&lt;/span> &lt;span class="s1">&amp;#39;{ $1=strftime(&amp;#34;%Y-%m-&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1"> %T&amp;#34;,$1) &amp;#34;|&amp;#34;; print }&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#使用 histall 命令查看全部历史纪录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">function&lt;/span> &lt;span class="n">histall&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">convhistory&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">allhistory&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sed&lt;/span> &lt;span class="s1">&amp;#39;/^.\{20\} *cd/i&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#使用 hist 查看当前目录历史纪录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">function&lt;/span> &lt;span class="n">hist&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">convhistory&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">HISTFILE&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#全部历史纪录 top50&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">top50&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">allhistory&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">awk&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">F&lt;/span>&lt;span class="s1">&amp;#39;:[ 0-9]*:[0-9]*;&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;{ $1=&amp;#34;&amp;#34; ; print }&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sed&lt;/span> &lt;span class="s1">&amp;#39;s/ /&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">/g&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sed&lt;/span> &lt;span class="s1">&amp;#39;/^$/d&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sort&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">uniq&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sort&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">nr&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">head&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="mi">50&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#杂项 {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#允许在交互模式中使用注释 例如：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#cmd #这是注释&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">INTERACTIVE_COMMENTS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#启用自动 cd，输入目录名回车进入目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#稍微有点混乱，不如 cd 补全实用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">AUTO_CD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#扩展路径&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/v/c/p/p =&amp;gt; /var/cache/pacman/pkg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">complete_in_word&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#禁用 core dumps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">limit&lt;/span> &lt;span class="n">coredumpsize&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Emacs风格 键绑定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bindkey&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#bindkey -v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#设置 [DEL]键 为向后删除&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#bindkey &amp;#34;\e[3~&amp;#34; delete-char&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#以下字符视为单词的一部分&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORDCHARS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;*?_-[]~=&amp;amp;;!#$%^(){}&amp;lt;&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#自动补全功能 {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">AUTO_LIST&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">AUTO_MENU&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#开启此选项，补全时会直接选中菜单项&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#setopt MENU_COMPLETE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autoload&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">compinit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">compinit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#自动补全缓存&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#zstyle &amp;#39;:completion::complete:*&amp;#39; use-cache on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#zstyle &amp;#39;:completion::complete:*&amp;#39; cache-path .zcache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#zstyle &amp;#39;:completion:*:cd:*&amp;#39; ignore-parents parent pwd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#自动补全选项&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">verbose&lt;/span> &lt;span class="n">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">menu&lt;/span> &lt;span class="n">select&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:*:default&amp;#39;&lt;/span> &lt;span class="n">force&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="n">always&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">select&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prompt&lt;/span> &lt;span class="s1">&amp;#39;%SSelect: lines: %L matches: %M [%p]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:match:*&amp;#39;&lt;/span> &lt;span class="n">original&lt;/span> &lt;span class="n">only&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion::prefix-1:*&amp;#39;&lt;/span> &lt;span class="n">completer&lt;/span> &lt;span class="n">_complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:predict:*&amp;#39;&lt;/span> &lt;span class="n">completer&lt;/span> &lt;span class="n">_complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:incremental:*&amp;#39;&lt;/span> &lt;span class="n">completer&lt;/span> &lt;span class="n">_complete&lt;/span> &lt;span class="n">_correct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">completer&lt;/span> &lt;span class="n">_complete&lt;/span> &lt;span class="n">_prefix&lt;/span> &lt;span class="n">_correct&lt;/span> &lt;span class="n">_prefix&lt;/span> &lt;span class="n">_match&lt;/span> &lt;span class="n">_approximate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#路径补全&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">expand&lt;/span> &lt;span class="s1">&amp;#39;yes&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">squeeze&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shlashes&lt;/span> &lt;span class="s1">&amp;#39;yes&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion::complete:*&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#彩色补全菜单&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">eval&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dircolors&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">ZLSCOLORS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${LS_COLORS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zmodload&lt;/span> &lt;span class="n">zsh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">complist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">colors&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">LS_COLORS&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:*:kill:*:processes&amp;#39;&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">colors&lt;/span> &lt;span class="s1">&amp;#39;=(#b) #([0-9]#)*=0=01;31&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#修正大小写&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">matcher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;m:{a-zA-Z}={A-Za-z}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#错误校正&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">completer&lt;/span> &lt;span class="n">_complete&lt;/span> &lt;span class="n">_match&lt;/span> &lt;span class="n">_approximate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:match:*&amp;#39;&lt;/span> &lt;span class="n">original&lt;/span> &lt;span class="n">only&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:approximate:*&amp;#39;&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">errors&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">numeric&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#kill 命令补全&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">compdef&lt;/span> &lt;span class="n">pkill&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">kill&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">compdef&lt;/span> &lt;span class="n">pkill&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">killall&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:*:kill:*&amp;#39;&lt;/span> &lt;span class="n">menu&lt;/span> &lt;span class="n">yes&lt;/span> &lt;span class="n">select&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:*:*:*:processes&amp;#39;&lt;/span> &lt;span class="n">force&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="n">always&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:processes&amp;#39;&lt;/span> &lt;span class="n">command&lt;/span> &lt;span class="s1">&amp;#39;ps -au$USER&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#补全类型提示分组&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:matches&amp;#39;&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="s1">&amp;#39;yes&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*&amp;#39;&lt;/span> &lt;span class="n">group&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:options&amp;#39;&lt;/span> &lt;span class="n">description&lt;/span> &lt;span class="s1">&amp;#39;yes&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:options&amp;#39;&lt;/span> &lt;span class="n">auto&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">description&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:descriptions&amp;#39;&lt;/span> &lt;span class="n">format&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="s1">&amp;#39;\e[01;33m -- &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1"> --\e[0m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:messages&amp;#39;&lt;/span> &lt;span class="n">format&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="s1">&amp;#39;\e[01;35m -- &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1"> --\e[0m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:warnings&amp;#39;&lt;/span> &lt;span class="n">format&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="s1">&amp;#39;\e[01;31m -- No Matches Found --\e[0m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:corrections&amp;#39;&lt;/span> &lt;span class="n">format&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="s1">&amp;#39;\e[01;32m -- &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1"> (errors: &lt;/span>&lt;span class="si">%e&lt;/span>&lt;span class="s1">) --\e[0m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># cd ~ 补全顺序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:-tilde-:*&amp;#39;&lt;/span> &lt;span class="n">group&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">order&lt;/span> &lt;span class="s1">&amp;#39;named-directories&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;path-directories&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;expand&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##行编辑高亮模式 {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ctrl+@ 设置标记，标记和光标点之间为 region&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zle_highlight&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">region&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">bg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">magenta&lt;/span> &lt;span class="c1">#选中区域&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">special&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">bold&lt;/span> &lt;span class="c1">#特殊字符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isearch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">underline&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">#搜索时使用的关键字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##空行(光标在行首)补全 &amp;#34;cd &amp;#34; {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">user&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">complete&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">BUFFER&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="c1"># 空行填入 &amp;#34;cd &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">BUFFER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;cd &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zle&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zle&lt;/span> &lt;span class="n">expand&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ow">or&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;cd --&amp;#34;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="c1"># &amp;#34;cd --&amp;#34; 替换为 &amp;#34;cd +&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">BUFFER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;cd +&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zle&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zle&lt;/span> &lt;span class="n">expand&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ow">or&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;cd +-&amp;#34;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="c1"># &amp;#34;cd +-&amp;#34; 替换为 &amp;#34;cd -&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">BUFFER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;cd -&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zle&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zle&lt;/span> &lt;span class="n">expand&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ow">or&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zle&lt;/span> &lt;span class="n">expand&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ow">or&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zle&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">N&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bindkey&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##在命令前插入 sudo {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#定义功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[[&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">BUFFER&lt;/span> &lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">zle&lt;/span> &lt;span class="n">up&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">history&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[[&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">BUFFER&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">sudo&lt;/span>\ &lt;span class="o">*&lt;/span> &lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">BUFFER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;sudo $BUFFER&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zle&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span> &lt;span class="c1">#光标移动到行末&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zle&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">N&lt;/span> &lt;span class="n">sudo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#定义快捷键为： [Esc] [Esc]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bindkey&lt;/span> &lt;span class="s2">&amp;#34;\e\e&amp;#34;&lt;/span> &lt;span class="n">sudo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#[Esc][h] man 当前命令时，显示简短说明&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alias&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">help&lt;/span> &lt;span class="o">&amp;gt;&amp;amp;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">unalias&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autoload&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#历史命令 top10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alias&lt;/span> &lt;span class="n">top10&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;print -l ${(o)history&lt;/span>&lt;span class="si">%%&lt;/span>&lt;span class="s1"> *} | uniq -c | sort -nr | head -n 10&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#路径别名 {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#进入相应的路径时只要 cd ~xxx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/media/ayu/dearest&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">H&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/media/data/backup/ayu&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">E&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/etc/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">D&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/home/ayumi/Documents&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##for Emacs {{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#在 Emacs终端 中使用 Zsh 的一些设置 不推荐在 Emacs 中使用它&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#if [[ &amp;#34;$TERM&amp;#34; == &amp;#34;dumb&amp;#34; ]]; then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#setopt No_zle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#PROMPT=&amp;#39;%n@%M %/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&amp;gt;&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#alias ls=&amp;#39;ls -F&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#{{{自定义补全&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#补全 ping&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zstyle&lt;/span> &lt;span class="s1">&amp;#39;:completion:*:ping:*&amp;#39;&lt;/span> &lt;span class="n">hosts&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">51&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">101&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">google&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#补全 ssh scp sftp 等&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#zstyle -e &amp;#39;:completion::*:*:*:hosts&amp;#39; hosts &amp;#39;reply=(${=${${(f)&amp;#34;$(cat {/etc/ssh_,~/.ssh/known_}hosts(|2)(N) /dev/null)&amp;#34;}%%[# ]*}//,/ })&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#{{{ F1 计算器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">arith&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">eval&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">echo&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LBUFFER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${LBUFFER}echo \$(( &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RBUFFER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34; ))$RBUFFER&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zle&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">N&lt;/span> &lt;span class="n">arith&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">eval&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">echo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bindkey&lt;/span> &lt;span class="s2">&amp;#34;^[[11~&amp;#34;&lt;/span> &lt;span class="n">arith&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">eval&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">echo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">####{{{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">timeconv&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">date&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="err">@&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;%Y-%m-&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2"> %T&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># }}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zmodload&lt;/span> &lt;span class="n">zsh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mathfunc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autoload&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">setup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zsh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">setup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">EXTENDED_GLOB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#autoload -U promptinit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#promptinit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#prompt redhat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">correctall&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">autoload&lt;/span> &lt;span class="n">compinstall&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#漂亮又实用的命令高亮界面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">setopt&lt;/span> &lt;span class="n">extended_glob&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TOKENS_FOLLOWED_BY_COMMANDS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;|&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;||&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;;&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;&amp;amp;&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;&amp;amp;&amp;amp;&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;sudo&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;do&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;strace&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">recolor&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">region_highlight&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">colorize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">start_pos&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">arg&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{(&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">BUFFER&lt;/span>&lt;span class="p">};&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">((&lt;/span>&lt;span class="n">start_pos&lt;/span>&lt;span class="o">+=$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="c1">#BUFFER[$start_pos+1,-1]}-${#${BUFFER[$start_pos+1,-1]## #}}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">((&lt;/span>&lt;span class="n">end_pos&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">start_pos&lt;/span>&lt;span class="o">+$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="c1">#arg}))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">colorize&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">colorize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">LC_ALL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="n">builtin&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">arg&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">res&lt;/span> &lt;span class="ow">in&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="s1">&amp;#39;reserved word&amp;#39;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fg=magenta,bold&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="s1">&amp;#39;alias for&amp;#39;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fg=cyan,bold&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="s1">&amp;#39;shell builtin&amp;#39;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fg=yellow,bold&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="s1">&amp;#39;shell function&amp;#39;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;fg=green,bold&amp;#39;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="s2">&amp;#34;$arg is&amp;#34;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">arg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;sudo&amp;#39;&lt;/span> &lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fg=red,bold&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;fg=blue,bold&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;none,bold&amp;#39;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">region_highlight&lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;$start_pos $end_pos $style&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">TOKENS_FOLLOWED_BY_COMMANDS&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">arg&lt;/span>&lt;span class="o">//|/&lt;/span>\&lt;span class="o">|&lt;/span>&lt;span class="p">}]}:&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;yes&amp;#39;&lt;/span> &lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">colorize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">start_pos&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">end_pos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">check&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">zle&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">self&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insert&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">recolor&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">check&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">char&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">zle&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">backward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">char&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">recolor&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zle&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">N&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insert&lt;/span> &lt;span class="n">check&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insert&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zle&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">N&lt;/span> &lt;span class="n">backward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">char&lt;/span> &lt;span class="n">check&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">backward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">char&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="34-安装必要软件">3.4 安装必要软件
&lt;/h3>&lt;p>这个就自己按需安装了，根据评论区建议，可以添加一个 pacman.ltd 源，里面有很多常用的软件，matlab 和 mathmatica 都有，直接 &amp;ldquo;vim /etc/pacman.conf&amp;rdquo;，在后面添加：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[Clansty]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SigLevel = Never
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://repo.lwqwq.com/archlinux/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://pacman.ltd/archlinux/$arch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server = https://repo.clansty.com/archlinux/$arch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>vscode、matlab、texlive-full 之类的东西都可以直接 pacman 安装了。&lt;/p>
&lt;h2 id="4-总结">4 总结
&lt;/h2>&lt;p>本来没想要写这么多的，但是写了就。。。。。应该还算比较详细了，罗列了很多教程里面的坑，资料来源几乎都是 wiki，流程主要参考开头的文章，希望可以帮助到大家。我很喜欢 archlinux，能高兴能出一份力。&lt;/p>
&lt;p>然后总结一下需要注意的坑点&lt;/p>
&lt;ul>
&lt;li>pacman 务必先换源&lt;/li>
&lt;li>如果需要有线网和 usb 共享的话，iwd 和 networkmanager 必须安装，且在第一次重启之前装好。如果只需要无线网，可以卸载 networkmanager，只使用 iwd&lt;/li>
&lt;li>grub-install 是对整个硬盘，不是 boot 分区&lt;/li>
&lt;li>KDE 有些组件比较臃肿，是可以替换的。&lt;/li>
&lt;li>输入法不要再用旧版的 fcitx4&lt;/li>
&lt;li>boot 分区挂载到 /boot/efi 而不是 /efi&lt;/li>
&lt;li>usb 共享网络安装时，提前安装好 usbmuxd，networkmanager&lt;/li>
&lt;li>如果需要开启 sshd 服务，请使用 sudo systemctl enble sshd，否则别人连不上你电脑&lt;/li>
&lt;li>dhcpcd 是网线用户需要安装的必备组件&lt;/li>
&lt;li>不取消注释 /etc/pacman.conf 中的 [multilib] 行，virtualbox 装不上。&lt;/li>
&lt;/ul></description></item><item><title>内网穿透是什么，有哪些工具可以做到？</title><link>https://songguokunsgg.github.io/p/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%98%AF%E4%BB%80%E4%B9%88%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%8F%AF%E4%BB%A5%E5%81%9A%E5%88%B0/</link><pubDate>Wed, 11 May 2022 14:02:02 +0000</pubDate><guid>https://songguokunsgg.github.io/p/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%98%AF%E4%BB%80%E4%B9%88%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%8F%AF%E4%BB%A5%E5%81%9A%E5%88%B0/</guid><description>&lt;h2 id="安装过程">安装过程
&lt;/h2>&lt;p>DNS: 223.5.5.5，需要联网&lt;/p>
&lt;h2 id="换源转载自-tismagicpve81-下软件源更新与其它配置">换源（转载自 Tismagic：PVE8.1 下软件源更新与其它配置）
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. 更新debian 软件源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#(任选一个源)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.1 清华源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 参考: https://mirrors.tuna.tsinghua.edu.cn/help/debian/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#ftp.debian.org/debian#mirrors.tuna.tsinghua.edu.cn/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#security.debian.org#mirrors.tuna.tsinghua.edu.cn/debian-security#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.2 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 参考: https://mirrors.ustc.edu.cn/help/proxmox.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s1">&amp;#39;s|^deb http://ftp.debian.org|deb https://mirrors.ustc.edu.cn|g&amp;#39;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s1">&amp;#39;s|^deb http://security.debian.org|deb https://mirrors.ustc.edu.cn/debian-security|g&amp;#39;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.3 aliyun源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#ftp.debian.org/debian#mirrors.aliyun.com/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#修改文件的同时, 会创建一个.bak后缀的备份文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#security.debian.org#mirrors.aliyun.com/debian-security#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#阿里Debian源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#1.1.4 163源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#ftp.debian.org/debian#mirrors.163.com/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#163Debian源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#security.debian.org#mirrors.163.com/debian-security#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#163Debian源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#apt update &amp;amp;&amp;amp; apt-get install -y apt-transport-https ca-certificates --fix-missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. PVE 软件源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除默认企业源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pve&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">enterprise&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#(任选一个源)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.1.1 清华源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian bookworm pve-no-subscription&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pve&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">subscription&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.1.2 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.ustc.edu.cn/proxmox/debian/pve bookworm pve-no-subscription&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pve&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">subscription&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#3 CEPH分布式源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#3.1.1 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-quincy bookworm no-subscription&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="c1">#中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#http://download.proxmox.com/debian#https://mirrors.ustc.edu.cn/proxmox/debian#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">perl5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PVE&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pveceph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pm&lt;/span> &lt;span class="c1">#中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更新索引, 升级安装软件包, 重启系统&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如果无法拉取https软件源时安装&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apt&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">apt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">get&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="n">apt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">transport&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">https&lt;/span> &lt;span class="n">ca&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certificates&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">fix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">missing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apt&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">apt&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">upgrade&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#4.LXC容器仓库源(CT)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4.1.1 中科大源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s#http://download.proxmox.com/images#https://mirrors.ustc.edu.cn/proxmox/images#g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">perl5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PVE&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">APLInfo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">systemctl&lt;/span> &lt;span class="n">restart&lt;/span> &lt;span class="n">pvedaemon&lt;/span> &lt;span class="c1"># 稍等下手动刷新webui 页面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除订阅弹窗&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Ezi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bak&lt;/span> &lt;span class="s2">&amp;#34;s/(Ext.Msg.show\(\{\s+title: gettext\(&amp;#39;No valid sub)/void\(\{ \/\/&lt;/span>&lt;span class="se">\1&lt;/span>&lt;span class="s2">/g&amp;#34;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">javascript&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxmox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">widget&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">toolkit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxmoxlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">js&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">restart&lt;/span> &lt;span class="n">pveproxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 执行完成后，需注销PVE登录后, 重新启动浏览器&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="启用内网穿透">启用内网穿透
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.natfrp.com/tunnel/" target="_blank" rel="noopener"
>https://www.natfrp.com/tunnel/&lt;/a> 申请一个免费节点（本地端口为 8006）&lt;/p>
&lt;p>&lt;img src="https://songguokunsgg.github.io/p/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%98%AF%E4%BB%80%E4%B9%88%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%8F%AF%E4%BB%A5%E5%81%9A%E5%88%B0/sakurafrp.jpg"
width="720"
height="185"
srcset="https://songguokunsgg.github.io/p/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%98%AF%E4%BB%80%E4%B9%88%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%8F%AF%E4%BB%A5%E5%81%9A%E5%88%B0/sakurafrp_hu_a0802eb3e4b8b408.jpg 480w, https://songguokunsgg.github.io/p/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%98%AF%E4%BB%80%E4%B9%88%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%8F%AF%E4%BB%A5%E5%81%9A%E5%88%B0/sakurafrp_hu_4bb1e683bf00161e.jpg 1024w"
loading="lazy"
alt="SakuraFRP"
class="gallery-image"
data-flex-grow="389"
data-flex-basis="934px"
>&lt;/p>
&lt;p>下载 sakura 的 Frpc 文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://nya.globalslb.net/natfrp/client/launcher-unix/3.1.0/natfrp-service_linux_amd64.tar.zst
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>假设保存在 &lt;code>/root/Documents/&lt;/code> 下面，&lt;code>cd&lt;/code> 到该目录，解压缩，给权限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /root/Documents
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar -I zstd xvf natfrp-service_linux_amd64.tar.zst
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x ./*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>先运行一次 &lt;code>./frpc&lt;/code> 生成配置文件，配件文件保存在 &lt;code>./frpc.ini&lt;/code> 中&lt;/p>
&lt;h3 id="pve-系统添加-frpc-自启动">PVE 系统添加 frpc 自启动
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">vim /etc/init.d/sakuraFprc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后编写一个启动脚本，如果你的文件目录跟我放的一样，可以复制粘贴&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### BEGIN INIT INFO&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Provides: sakuraFrpc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Required-Start: $network $remote_fs $local_fs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Required-Stop: $network $remote_fs $local_fs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Default-Start: 2 3 4 5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Default-Stop: 0 1 6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Short-Description: A frpc clients&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Description: A frpc clients&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### END INIT INFO&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nohup /root/Documents/frpc -c /root/Documents/frpc.ini &amp;gt;/dev/null 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>让 frpc 在系统启动时保持运行&lt;/p>
&lt;p>重启，登陆 root, 查看进程是否存在&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ps -ef &lt;span class="p">|&lt;/span> grep frpc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果有类似&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">/root/Documents/frpc -c /root/Documents/frpc.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样的输出就可以了，直接通过 sakura 的 [IP]:[Port] 访问即可&lt;/p></description></item></channel></rss>